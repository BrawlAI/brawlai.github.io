(this.webpackJsonppages=this.webpackJsonppages||[]).push([[211],{364:function(e,t,n){"use strict";n.r(t);var i=n(37),a=n(40),l=n(0),r=n.n(l),o=n(59),c=n(291),s=n(14),d=n(1);function u(e){return{paddingLeft:10*e+"px"}}function f(e){return e.readOnly?Object(d.jsxs)("div",{className:"editor-side-panel-readOnly-note",children:["Note: This project is launched. ",Object(d.jsx)(s.b,{className:"inline",title:"Duplicate in the Participate tab",to:"/participate",children:"Duplicate"})," this in the participate panel to continue editing."]}):[]}function p(e){var t=e.path,n=e.openFile,i=e.renameFile,r=e.renamingFile,o=e.unSelectEditFileName,s=Object(l.useState)(t[t.length-1]),u=Object(a.a)(s,2),f=u[0],p=u[1];return c.a.equals(t,r)?Object(d.jsx)("input",{ref:function(e){null!==e&&e.focus()},className:"editor-file-name editor-file-name-editing",onChange:function(e){p(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&f!==t[t.length-1]&&i(t,f)},onBlur:function(){o(),p(t[t.length-1])},value:f}):Object(d.jsx)("button",{className:"editor-file-name editor-file-name-button",onClick:function(e){e.preventDefault(),n(t)},children:t[t.length-1]})}function j(e){var t=e.path,n=e.action,i=e.icon,a=e.rotation,l=e.contents,r=e.title;function c(e){e.preventDefault(),l?n(t,l):n(t)}return e.hide?[]:null!==a?Object(d.jsx)("button",{className:"editor-icon-button",title:r,onClick:c,children:Object(d.jsx)(o.a,{icon:i,rotation:a})}):Object(d.jsx)("button",{className:"editor-icon-button",title:r,onClick:c,children:Object(d.jsx)(o.a,{icon:i})})}function m(e){var t=e.file,n=e.path,i=e.openFile,a=e.editFileName,l=e.renameFile,r=e.currentFile,s=e.renamingFile,f=e.indentation,m=e.render,b=e.removeFile,h=e.restoreFile,F=e.duplicateFile,v=e.setStartFile,O=e.unSelectEditFileName,x=e.readOnly,g="file";t.name.endsWith(".py")&&(g=["fab","python"]),t.start&&(g="play");var y="editor-file editor-side-item";c.a.equals(r,n)&&(y="editor-file editor-side-item editor-current-file");var N=!c.a.equals(n,s)&&!x;n[0]===c.a.deletedFolderName?m.push(Object(d.jsxs)("div",{className:y,style:u(f),children:[Object(d.jsxs)("div",{className:"editor-folder-menu",children:[Object(d.jsx)(j,{icon:"pencil-alt",path:n,action:a,title:"Rename",hide:x}),Object(d.jsx)(j,{icon:"undo-alt",path:n,action:h,title:"Restore",hide:x}),Object(d.jsx)(j,{icon:"toilet",path:n,action:b,title:"Permanently delete",hide:x})]}),Object(d.jsxs)("div",{className:"editor-item-details",draggable:N,onDragStart:function(e){return e.dataTransfer.setData("text",JSON.stringify(n))},children:[Object(d.jsx)(o.a,{icon:g})," ",Object(d.jsx)(p,{path:n,openFile:i,renameFile:l,renamingFile:s,unSelectEditFileName:O})]})]},n)):m.push(Object(d.jsxs)("div",{className:y,style:u(f),children:[Object(d.jsxs)("div",{className:"editor-folder-menu",children:[Object(d.jsx)(j,{icon:"pencil-alt",path:n,action:a,title:"Rename",hide:x}),Object(d.jsx)(j,{icon:"play",path:n,action:v,title:"Set as start file",hide:x}),Object(d.jsx)(j,{icon:"copy",path:n,action:F,title:"Duplicate",hide:x}),Object(d.jsx)(j,{icon:"trash-alt",path:n,action:b,title:"Delete",hide:x})]}),Object(d.jsxs)("div",{className:"editor-item-details",draggable:N,onDragStart:function(e){return e.dataTransfer.setData("text",JSON.stringify(n))},children:[Object(d.jsx)(o.a,{icon:g})," ",Object(d.jsx)(p,{path:n,openFile:i,renameFile:l,renamingFile:s,unSelectEditFileName:O})]})]},n))}function b(e){var t=e.path,n=e.openFile,a=e.editFileName,l=e.renameFile,r=e.currentFile,s=e.renamingFile,f=e.indentation,h=e.render,F=e.newFile,v=e.removeFile,O=e.restoreFile,x=e.drop,g=e.duplicateFile,y=e.setStartFile,N=e.unSelectEditFileName,S=e.readOnly;function D(e,t){e.preventDefault();var n=e.dataTransfer.getData("text");x(n,t)}var E=e.file,w="folder";if(E.open&&(w="folder-open"),E.name===c.a.deletedFolderName){w="trash-alt";var k=null;E.open&&(k=15),h.push(Object(d.jsx)("div",{className:"editor-open-folder editor-side-item",style:u(f),children:Object(d.jsxs)("div",{className:"editor-item-details",onDrop:function(e){return D(e,t)},onDragOver:function(e){return e.preventDefault()},children:[Object(d.jsx)(o.a,{icon:w,rotation:k})," ",Object(d.jsx)(p,{path:t,openFile:n,renameFile:l,renamingFile:s,unSelectEditFileName:N})]})},t))}else if(t[0]===c.a.deletedFolderName){var P=!c.a.equals(t,s)&&!S;h.push(Object(d.jsxs)("div",{className:"editor-open-folder editor-side-item",style:u(f),children:[Object(d.jsxs)("div",{className:"editor-folder-menu",children:[Object(d.jsx)(j,{icon:"pencil-alt",path:t,action:a,title:"Rename",hide:S}),Object(d.jsx)(j,{icon:"undo-alt",path:t,action:O,title:"Restore",hide:S}),Object(d.jsx)(j,{icon:"toilet",path:t,action:v,title:"Permanently delete",hide:S})]}),Object(d.jsxs)("div",{className:"editor-item-details",draggable:P,onDrop:function(e){return D(e,t)},onDragStart:function(e){return e.dataTransfer.setData("text",JSON.stringify(t))},onDragOver:function(e){return e.preventDefault()},children:[Object(d.jsx)(o.a,{icon:w})," ",Object(d.jsx)(p,{path:t,openFile:n,renameFile:l,renamingFile:s,unSelectEditFileName:N})]})]},t))}else{var T=!c.a.equals(t,s)&&!S;h.push(Object(d.jsxs)("div",{className:"editor-open-folder editor-side-item",style:u(f),children:[Object(d.jsxs)("div",{className:"editor-folder-menu",children:[Object(d.jsx)(j,{icon:"pencil-alt",path:t,action:a,title:"Rename",hide:S}),Object(d.jsx)(j,{icon:"file-medical",path:t,action:F,title:"New file",hide:S}),Object(d.jsx)(j,{icon:"folder-plus",path:t,action:F,title:"New folder",contents:[],hide:S}),Object(d.jsx)(j,{icon:"trash-alt",path:t,action:v,title:"Delete",hide:S})]}),Object(d.jsxs)("div",{className:"editor-item-details",draggable:T,onDrop:function(e){return D(e,t)},onDragStart:function(e){return e.dataTransfer.setData("text",JSON.stringify(t))},onDragOver:function(e){return e.preventDefault()},children:[Object(d.jsx)(o.a,{icon:w})," ",Object(d.jsx)(p,{path:t,openFile:n,renameFile:l,renamingFile:s,unSelectEditFileName:N})]})]},t))}if(E.open){f++;var R,C=Object(i.a)(E.data);try{for(C.s();!(R=C.n()).done;){var H=R.value,J=t.slice();J.push(H.name);var q={file:H,path:J,openFile:n,editFileName:a,renameFile:l,currentFile:r,renamingFile:s,indentation:f,render:h,newFile:F,removeFile:v,restoreFile:O,duplicateFile:g,drop:x,setStartFile:y,unSelectEditFileName:N,readOnly:S};c.a.isFolder(H)?b(q):m(q)}}catch(A){C.e(A)}finally{C.f()}}}function h(e){var t,n=e.currentFile,a=e.files,l=e.renamingFile,r=e.openFile,o=e.editFileName,s=e.renameFile,d=e.newFile,u=e.removeFile,f=e.restoreFile,p=e.drop,j=e.duplicateFile,h=e.setStartFile,F=e.unSelectEditFileName,v=e.readOnly,O=[],x=Object(i.a)(a);try{for(x.s();!(t=x.n()).done;){var g=t.value,y={file:g,path:[g.name],openFile:r,editFileName:o,renameFile:s,currentFile:n,renamingFile:l,indentation:1,render:O,newFile:d,removeFile:u,restoreFile:f,drop:p,duplicateFile:j,setStartFile:h,unSelectEditFileName:F,readOnly:v};c.a.isFolder(g)?b(y):m(y)}}catch(N){x.e(N)}finally{x.f()}return O}function F(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,i=Object(l.useRef)();Object(l.useEffect)((function(){i.current=t}),[t]),Object(l.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return i.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])}t.default=function(e){var t=Object(l.useState)([]),n=Object(a.a)(t,2),i=n[0],s=n[1],u=Object(l.useState)(null),p=Object(a.a)(u,2),m=p[0],b=p[1],v=Object(l.useState)(),O=Object(a.a)(v,2)[1],x=r.a.useCallback((function(){return O({})}),[]),g=e.fileHandler.files,y=e.projectName,N=e.fileHandler,S=e.openFile,D=e.updateCurrentFilePath,E=e.readOnly;Object(l.useEffect)((function(){null!==e.registerSidePanelSave&&e.registerSidePanelSave(T),void 0!==e.fileHandler&&(e.fileHandler.notifySave=C,e.fileHandler.notifyUnsave=R,e.fileHandler.saveState===c.a.saved?C():R())}),[e.registerSidePanelSave,e.fileHandler]);var w=function(e,t){N.newFile(e,t)&&x()},k=function(e,t,n){N.newDragFile(e,t,n)},P=function(e,t){e=JSON.parse(e),N.moveFile(e,t),x()},T=function(){N.save()},R=function(){document.documentElement.style.setProperty("--editor-save-button-display","block")},C=function(){document.documentElement.style.setProperty("--editor-save-button-display","none")},H=Object(l.useRef)(),J=function e(t,n){if(n=n||[],t.isFile)t.file((function(e){var t=new FileReader;t.onload=function(t){k(n,e.name,t.target.result),x()},t.readAsText(e)}));else if(t.isDirectory){t.createReader().readEntries((function(i){for(var a=0;a<i.length;a++){var l=n.slice();l.push(t.name),e(i[a],l)}}))}},q=Object(l.useCallback)((function(e){e.stopPropagation(),e.preventDefault(),e.dataTransfer.dropEffect="copy"}),[k]);return F("drop",(function(e){e.stopPropagation(),e.preventDefault(),console.log(e);var t=e.dataTransfer.items;console.log("items:"),console.log(t);for(var n=0;n<t.length;n++){var i=t[n].webkitGetAsEntry();console.log("typeof item: "+typeof i),i&&J(i)}}),H.current),F("dragover",q,H.current),Object(d.jsxs)("div",{ref:H,className:"editor-side-panel",children:[Object(d.jsxs)("div",{className:"editor-project-title",children:[Object(d.jsxs)("div",{className:"editor-folder-menu",children:[Object(d.jsx)(j,{icon:"file-medical",path:[],action:w,title:"New file",hide:E}),Object(d.jsx)(j,{icon:"folder-plus",path:[],action:w,title:"New folder",contents:[],hide:E})]}),Object(d.jsxs)("button",{className:"editor-project-title-button",onClick:function(t){t.preventDefault(),e.hideSidePanel()},children:[Object(d.jsx)(o.a,{icon:"cube"}),Object(d.jsx)("span",{className:"editor-project-name",onDrop:function(e){e.preventDefault(),P(e.dataTransfer.getData("text"))},onDragOver:function(e){return e.preventDefault()},children:y})]})]}),Object(d.jsx)(h,{openFile:function(e){var t=N.openFile(e);t.isFolder?(c.a.isSubset(e,i)&&(s(null),null!==S&&S(null)),x()):(s(e),null!==S&&S(e,t.file))},editFileName:function(e){b(e)},renameFile:function(e,t){var n=null!=t?t.trim():null;if(null!=t){if(N.renameFile(e,n))if(c.a.isSubset(e,i)){var a=i.slice();a[e.length-1]=n,s(a),null!==D&&D(a)}b(null)}},newFile:w,removeFile:function(e){N.removeFile(e)&&(null!==S&&S(null),x())},restoreFile:function(e){N.restoreFile(e),x()},drop:P,duplicateFile:function(e){N.duplicateFile(e),x()},setStartFile:function(e){N.setStartFile(e),x()},unSelectEditFileName:function(){b(null)},currentFile:i,files:g,renamingFile:m,readOnly:E}),Object(d.jsx)("button",{className:"editor-side-panel-save active-button",onClick:function(e){e.preventDefault(),T()},title:"Save all modifications.",children:"Save files"}),Object(d.jsx)(f,{readOnly:E})]})}},40:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(70);var a=n(58),l=n(71);function r(e,t){return Object(i.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,a=!1,l=void 0;try{for(var r,o=e[Symbol.iterator]();!(i=(r=o.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(c){a=!0,l=c}finally{try{i||null==o.return||o.return()}finally{if(a)throw l}}return n}}(e,t)||Object(a.a)(e,t)||Object(l.a)()}},70:function(e,t,n){"use strict";function i(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return i}))},71:function(e,t,n){"use strict";function i(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return i}))}}]);