(this.webpackJsonppages=this.webpackJsonppages||[]).push([[211],{360:function(e,t,i){"use strict";i.r(t);var n=i(9),a=i(10),l=i(11),r=i(12),o=i(37),c=i(40),s=i(0),d=i.n(s),u=i(59),f=i(288),p=i(14),F=i(1);function m(e){return{paddingLeft:10*e+"px"}}function j(e){return e.readOnly?Object(F.jsxs)("div",{className:"editor-side-panel-readOnly-note",children:["Note: This project is launched. ",Object(F.jsx)(p.b,{className:"inline",title:"Duplicate in the Participate tab",to:"/participate",children:"Duplicate"})," this in the participate panel to continue editing."]}):[]}function h(e){var t=e.path,i=e.openFile,n=e.renameFile,a=e.renamingFile,l=e.unSelectEditFileName,r=Object(s.useState)(t[t.length-1]),o=Object(c.a)(r,2),d=o[0],u=o[1];return f.a.equals(t,a)?Object(F.jsx)("input",{ref:function(e){null!==e&&e.focus()},className:"editor-file-name editor-file-name-editing",onChange:function(e){u(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&d!==t[t.length-1]&&n(t,d)},onBlur:function(){l(),u(t[t.length-1])},value:d}):Object(F.jsx)("button",{className:"editor-file-name editor-file-name-button",onClick:function(e){e.preventDefault(),i(t)},children:t[t.length-1]})}function v(e){var t=e.path,i=e.action,n=e.icon,a=e.rotation,l=e.contents,r=e.title;function o(e){e.preventDefault(),l?i(t,l):i(t)}return e.hide?[]:null!==a?Object(F.jsx)("button",{className:"editor-icon-button",title:r,onClick:o,children:Object(F.jsx)(u.a,{icon:n,rotation:a})}):Object(F.jsx)("button",{className:"editor-icon-button",title:r,onClick:o,children:Object(F.jsx)(u.a,{icon:n})})}function b(e){var t=e.file,i=e.path,n=e.openFile,a=e.editFileName,l=e.renameFile,r=e.currentFile,o=e.renamingFile,c=e.indentation,s=e.render,d=e.removeFile,p=e.restoreFile,j=e.duplicateFile,b=e.setStartFile,O=e.unSelectEditFileName,x=e.readOnly,N="file";t.name.endsWith(".py")&&(N=["fab","python"]),t.start&&(N="play");var y="editor-file editor-side-item";f.a.equals(r,i)&&(y="editor-file editor-side-item editor-current-file");var S=!f.a.equals(i,o)&&!x;i[0]===f.a.deletedFolderName?s.push(Object(F.jsxs)("div",{className:y,style:m(c),children:[Object(F.jsxs)("div",{className:"editor-folder-menu",children:[Object(F.jsx)(v,{icon:"pencil-alt",path:i,action:a,title:"Rename",hide:x}),Object(F.jsx)(v,{icon:"undo-alt",path:i,action:p,title:"Restore",hide:x}),Object(F.jsx)(v,{icon:"toilet",path:i,action:d,title:"Permanently delete",hide:x})]}),Object(F.jsxs)("div",{className:"editor-item-details",draggable:S,onDragStart:function(e){return e.dataTransfer.setData("text",JSON.stringify(i))},children:[Object(F.jsx)(u.a,{icon:N})," ",Object(F.jsx)(h,{path:i,openFile:n,renameFile:l,renamingFile:o,unSelectEditFileName:O})]})]},i)):s.push(Object(F.jsxs)("div",{className:y,style:m(c),children:[Object(F.jsxs)("div",{className:"editor-folder-menu",children:[Object(F.jsx)(v,{icon:"pencil-alt",path:i,action:a,title:"Rename",hide:x}),Object(F.jsx)(v,{icon:"play",path:i,action:b,title:"Set as start file",hide:x}),Object(F.jsx)(v,{icon:"copy",path:i,action:j,title:"Duplicate",hide:x}),Object(F.jsx)(v,{icon:"trash-alt",path:i,action:d,title:"Delete",hide:x})]}),Object(F.jsxs)("div",{className:"editor-item-details",draggable:S,onDragStart:function(e){return e.dataTransfer.setData("text",JSON.stringify(i))},children:[Object(F.jsx)(u.a,{icon:N})," ",Object(F.jsx)(h,{path:i,openFile:n,renameFile:l,renamingFile:o,unSelectEditFileName:O})]})]},i))}function O(e){var t=e.path,i=e.openFile,n=e.editFileName,a=e.renameFile,l=e.currentFile,r=e.renamingFile,c=e.indentation,s=e.render,d=e.newFile,p=e.removeFile,j=e.restoreFile,x=e.drop,N=e.duplicateFile,y=e.setStartFile,S=e.unSelectEditFileName,g=e.readOnly;function D(e,t){e.preventDefault();var i=e.dataTransfer.getData("text");x(i,t)}var E=e.file,w="folder";if(E.open&&(w="folder-open"),E.name===f.a.deletedFolderName){w="trash-alt";var P=null;E.open&&(P=15),s.push(Object(F.jsx)("div",{className:"editor-open-folder editor-side-item",style:m(c),children:Object(F.jsxs)("div",{className:"editor-item-details",onDrop:function(e){return D(e,t)},onDragOver:function(e){return e.preventDefault()},children:[Object(F.jsx)(u.a,{icon:w,rotation:P})," ",Object(F.jsx)(h,{path:t,openFile:i,renameFile:a,renamingFile:r,unSelectEditFileName:S})]})},t))}else if(t[0]===f.a.deletedFolderName){var H=!f.a.equals(t,r)&&!g;s.push(Object(F.jsxs)("div",{className:"editor-open-folder editor-side-item",style:m(c),children:[Object(F.jsxs)("div",{className:"editor-folder-menu",children:[Object(F.jsx)(v,{icon:"pencil-alt",path:t,action:n,title:"Rename",hide:g}),Object(F.jsx)(v,{icon:"undo-alt",path:t,action:j,title:"Restore",hide:g}),Object(F.jsx)(v,{icon:"toilet",path:t,action:p,title:"Permanently delete",hide:g})]}),Object(F.jsxs)("div",{className:"editor-item-details",draggable:H,onDrop:function(e){return D(e,t)},onDragStart:function(e){return e.dataTransfer.setData("text",JSON.stringify(t))},onDragOver:function(e){return e.preventDefault()},children:[Object(F.jsx)(u.a,{icon:w})," ",Object(F.jsx)(h,{path:t,openFile:i,renameFile:a,renamingFile:r,unSelectEditFileName:S})]})]},t))}else{var k=!f.a.equals(t,r)&&!g;s.push(Object(F.jsxs)("div",{className:"editor-open-folder editor-side-item",style:m(c),children:[Object(F.jsxs)("div",{className:"editor-folder-menu",children:[Object(F.jsx)(v,{icon:"pencil-alt",path:t,action:n,title:"Rename",hide:g}),Object(F.jsx)(v,{icon:"file-medical",path:t,action:d,title:"New file",hide:g}),Object(F.jsx)(v,{icon:"folder-plus",path:t,action:d,title:"New folder",contents:[],hide:g}),Object(F.jsx)(v,{icon:"trash-alt",path:t,action:p,title:"Delete",hide:g})]}),Object(F.jsxs)("div",{className:"editor-item-details",draggable:k,onDrop:function(e){return D(e,t)},onDragStart:function(e){return e.dataTransfer.setData("text",JSON.stringify(t))},onDragOver:function(e){return e.preventDefault()},children:[Object(F.jsx)(u.a,{icon:w})," ",Object(F.jsx)(h,{path:t,openFile:i,renameFile:a,renamingFile:r,unSelectEditFileName:S})]})]},t))}if(E.open){c++;var C,T=Object(o.a)(E.data);try{for(T.s();!(C=T.n()).done;){var I=C.value,U=t.slice();U.push(I.name);var J={file:I,path:U,openFile:i,editFileName:n,renameFile:a,currentFile:l,renamingFile:r,indentation:c,render:s,newFile:d,removeFile:p,restoreFile:j,duplicateFile:N,drop:x,setStartFile:y,unSelectEditFileName:S,readOnly:g};f.a.isFolder(I)?O(J):b(J)}}catch(R){T.e(R)}finally{T.f()}}}function x(e){var t,i=e.currentFile,n=e.files,a=e.renamingFile,l=e.openFile,r=e.editFileName,c=e.renameFile,s=e.newFile,d=e.removeFile,u=e.restoreFile,p=e.drop,F=e.duplicateFile,m=e.setStartFile,j=e.unSelectEditFileName,h=e.readOnly,v=[],x=Object(o.a)(n);try{for(x.s();!(t=x.n()).done;){var N=t.value,y={file:N,path:[N.name],openFile:l,editFileName:r,renameFile:c,currentFile:i,renamingFile:a,indentation:1,render:v,newFile:s,removeFile:d,restoreFile:u,drop:p,duplicateFile:F,setStartFile:m,unSelectEditFileName:j,readOnly:h};f.a.isFolder(N)?O(y):b(y)}}catch(S){x.e(S)}finally{x.f()}return v}var N=function(e){Object(l.a)(i,e);var t=Object(r.a)(i);function i(e){var a;return Object(n.a)(this,i),(a=t.call(this,e)).openFile=function(e){var t=a.state.fileHandler.openFile(e);if(t.isFolder){if(f.a.isSubset(e,a.state.currentFilePath)){a.setState({currentFilePath:null});var i=a.state.openFileInEditor;null!==i&&i(null)}a.forceUpdate()}else{a.setState({currentFilePath:e});var n=a.state.openFileInEditor;null!==n&&n(e,t.file)}},a.newFile=function(e,t){a.state.fileHandler.newFile(e,t)&&a.forceUpdate()},a.removeFile=function(e){if(a.state.fileHandler.removeFile(e)){var t=a.state.openFileInEditor;null!==t&&t(null),a.forceUpdate()}},a.restoreFile=function(e){a.state.fileHandler.restoreFile(e),a.forceUpdate()},a.unSelectEditFileName=function(){a.setState({renamingFile:null})},a.editFileName=function(e){a.setState({renamingFile:e})},a.drop=function(e,t){e=JSON.parse(e),a.state.fileHandler.moveFile(e,t),a.forceUpdate()},a.duplicateFile=function(e){a.state.fileHandler.duplicateFile(e),a.forceUpdate()},a.setStartFile=function(e){a.state.fileHandler.setStartFile(e),a.forceUpdate()},a.onClicksaveFiles=function(e){e.preventDefault(),a.saveFiles()},a.onClickProjectTitleButton=function(e){e.preventDefault(),a.props.hideSidePanel()},a.saveFiles=function(){a.state.fileHandler.save()},a.unsaved=function(){document.documentElement.style.setProperty("--editor-save-button-display","block")},a.saved=function(){document.documentElement.style.setProperty("--editor-save-button-display","none")},a.renameFile=function(e,t){var i=null!=t?t.trim():null;if(null!=t){if(a.state.fileHandler.renameFile(e,i)){var n=a.state.currentFilePath;if(f.a.isSubset(e,n)){var l=n.slice();l[e.length-1]=i,a.setState({currentFilePath:l});var r=a.state.updateCurrentFilePath;null!==r&&r(l)}}a.setState({renamingFile:null})}},a.state={projectName:e.projectName,fileHandler:e.fileHandler,files:e.fileHandler.files,currentFilePath:[],openFileInEditor:e.openFile,renameFileInEditor:e.renameFile,removeFileInEditor:e.removeFile,renamingFile:null,updateCurrentFilePath:e.updateCurrentFilePath,readOnly:e.readOnly},null!==e.registerSidePanelSave&&e.registerSidePanelSave(a.saveFiles),void 0!==e.fileHandler&&(e.fileHandler.notifySave=a.saved,e.fileHandler.notifyUnsave=a.unsaved,e.fileHandler.saveState===f.a.saved?a.saved():a.unsaved()),a}return Object(a.a)(i,[{key:"render",value:function(){var e=this,t=this.state,i=t.projectName,n=t.files,a=t.currentFilePath,l=t.renamingFile,r=t.readOnly;return Object(F.jsxs)("div",{className:"editor-side-panel",children:[Object(F.jsxs)("div",{className:"editor-project-title",children:[Object(F.jsxs)("div",{className:"editor-folder-menu",children:[Object(F.jsx)(v,{icon:"file-medical",path:[],action:this.newFile,title:"New file",hide:r}),Object(F.jsx)(v,{icon:"folder-plus",path:[],action:this.newFile,title:"New folder",contents:[],hide:r})]}),Object(F.jsxs)("button",{className:"editor-project-title-button",onClick:this.onClickProjectTitleButton,children:[Object(F.jsx)(u.a,{icon:"cube"}),Object(F.jsx)("span",{className:"editor-project-name",onDrop:function(t){t.preventDefault(),e.drop(t.dataTransfer.getData("text"))},onDragOver:function(e){return e.preventDefault()},children:i})]})]}),Object(F.jsx)(x,{openFile:this.openFile,editFileName:this.editFileName,renameFile:this.renameFile,newFile:this.newFile,removeFile:this.removeFile,restoreFile:this.restoreFile,drop:this.drop,duplicateFile:this.duplicateFile,setStartFile:this.setStartFile,unSelectEditFileName:this.unSelectEditFileName,currentFile:a,files:n,renamingFile:l,readOnly:r}),Object(F.jsx)("button",{className:"editor-side-panel-save active-button",onClick:this.onClicksaveFiles,title:"Save all modifications.",children:"Save files"}),Object(F.jsx)(j,{readOnly:r})]})}}]),i}(d.a.Component);t.default=N},40:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i(70);var a=i(58),l=i(71);function r(e,t){return Object(n.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,a=!1,l=void 0;try{for(var r,o=e[Symbol.iterator]();!(n=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);n=!0);}catch(c){a=!0,l=c}finally{try{n||null==o.return||o.return()}finally{if(a)throw l}}return i}}(e,t)||Object(a.a)(e,t)||Object(l.a)()}},70:function(e,t,i){"use strict";function n(e){if(Array.isArray(e))return e}i.d(t,"a",(function(){return n}))},71:function(e,t,i){"use strict";function n(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}i.d(t,"a",(function(){return n}))}}]);