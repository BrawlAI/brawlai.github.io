(this.webpackJsonppages=this.webpackJsonppages||[]).push([[197],{467:function(e,t,n){"use strict";n.r(t);var a=n(11),i=n(12),o=n(15),r=n(16),s=n(63),c=n(1),l=n(0),u=n.n(l),m=n(62),d=n(7),f=n(54),h=n(79),p=Object(l.lazy)((function(){return n.e(2).then(n.bind(null,179))}));function g(e){var t=e.name,n=e.renameUnit,a=e.newUnitName,i=e.renamingUnit,o=e.unSelectEditUnitName;return t===i?Object(c.jsx)("input",{ref:function(e){null!==e&&e.focus()},className:"manager-project-title-editing",onChange:function(e){a(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&n(t)},value:a(),onBlur:function(){o()},size:a().length}):Object(c.jsx)("span",{className:"manager-project-title-not-editing",children:t})}function j(e){var t=e.param1,n=e.action,a=e.icon,i=e.rotation,o=e.param2,r=e.title;function s(e){e.preventDefault(),o?n(t,o):n(t)}return null!==i?Object(c.jsx)("button",{className:"manager-icon-button",title:r,onClick:s,children:Object(c.jsx)(f.a,{icon:a,rotation:i})}):Object(c.jsx)("button",{className:"manager-icon-button",title:r,onClick:s,children:Object(c.jsx)(f.a,{icon:a})})}function v(e){return null!==e.unitName&&e.unitName.length>0?Object(c.jsx)("button",{className:"manager-new-button active-button",onClick:function(t){t.preventDefault(),e.action()},children:"Add"}):Object(c.jsx)("span",{className:"manager-new-button inactive-button",children:"Add"})}function b(e){var t=e.unit,n=[];return n.push(Object(c.jsxs)("div",{children:["Cost: ",t.cost]},t.name+"cost")),n.push(Object(c.jsx)("div",{className:"unit-stats-topic",children:"Base stats:"},t.name+"base-stats")),n.push(Object(c.jsxs)("div",{children:["Health: ",t.health]},t.name+"health")),n.push(Object(c.jsxs)("div",{children:["Movement: ",t.movement]},t.name+"movement")),n.push(Object(c.jsxs)("div",{children:["Vision: ",t.vision]},t.name+"vision")),n.push(Object(c.jsx)("div",{children:Object(c.jsxs)("span",{className:t.items.length>t.maxItems?"unit-stats-warning":"",children:["Items: ",t.items.length," / ",t.maxItems]})},t.name+"items")),t.maxDamage>0&&(n.push(Object(c.jsx)("div",{className:"unit-stats-topic",children:"Weapon stats:"},t.name+"weapon-stats")),n.push(Object(c.jsxs)("div",{children:["Aim: ",t.aim]},t.name+"aim")),n.push(Object(c.jsxs)("div",{children:["Damage: ",t.minDamage," - ",t.maxDamage]},t.name+"damage")),t.maxCrit>0&&(n.push(Object(c.jsxs)("div",{children:["Crit: ",t.minCrit," - ",t.maxCrit]},t.name+"crit")),t.crit>0&&n.push(Object(c.jsxs)("div",{children:["Crit +%: ",t.crit]},t.name+"crit%"))),n.push(Object(c.jsx)("div",{children:Object(c.jsxs)("span",{className:t.maxAmmo>0&&t.ammo<1?"unit-stats-warning":"",children:["Ammo: ",t.ammo," / ",t.maxAmmo]})},t.name+"ammo"))),n}function y(e){var t=e.units,n=e.onChangeWeapon,a=e.onChangeArmor,i=e.onChangeItem,o=e.changeWeaponMags,r=e.hasItem,l=e.editUnitName,u=e.renameUnit,m=e.newUnitName,d=e.renamingUnit,f=e.unSelectEditUnitName,h=e.removeUnit,p=[];function v(e,t,n){e(t,n.target.value)}function y(e,t,n){e(t,n.target.value,n.target.checked)}if(t){var O,S=Object(s.a)(t);try{var x=function(){var e=O.value;p.push(Object(c.jsxs)("div",{className:"manager-project manager-project-plain",children:[Object(c.jsxs)("h4",{className:"manager-project-title",children:[Object(c.jsx)("div",{className:"manager-title-menu-visible",children:Object(c.jsx)(j,{icon:"trash-alt",param1:e.name,action:h,title:"Remove unit."})}),Object(c.jsx)("div",{className:"manager-title-menu",children:Object(c.jsx)(j,{icon:"pencil-alt",param1:e.name,action:l,title:"Rename unit."})}),Object(c.jsx)(g,{name:e.name,renameUnit:u,newUnitName:m,renamingUnit:d,unSelectEditUnitName:f})]}),Object(c.jsxs)("div",{className:"unit-info-container",children:[Object(c.jsxs)("div",{className:"unit-options",children:[Object(c.jsxs)("div",{className:"unit-item-group",children:[Object(c.jsx)("div",{className:"unit-item-attribute",children:"Class"}),Object(c.jsx)("div",{className:"unit-item-selection-text",children:"Rookie"})]}),Object(c.jsxs)("div",{className:"unit-item-group",children:[Object(c.jsx)("div",{className:"unit-item-attribute",children:"Weapon"}),Object(c.jsxs)("form",{onChange:function(t){return v(n,e.name,t)},children:[Object(c.jsxs)("label",{className:"unit-item-selection",children:[Object(c.jsx)("input",{type:"radio",name:"weapon",value:"pistol",defaultChecked:"pistol"===e.weapon}),"Pistol"]}),Object(c.jsxs)("label",{className:"unit-item-selection",children:[Object(c.jsx)("input",{type:"radio",name:"weapon",value:"rifle",defaultChecked:"rifle"===e.weapon}),"Rifle"]}),Object(c.jsxs)("label",{className:"unit-item-selection",children:[Object(c.jsx)("input",{type:"radio",name:"weapon",value:"",defaultChecked:""===e.weapon}),"None"]})]}),Object(c.jsxs)("div",{className:"unit-item-selection-text",children:[Object(c.jsx)("span",{className:0===e.maxDamage&&e.weaponMags>0||e.maxDamage>0&&e.weaponMags<1?"unit-stats-warning":"",children:"Mags:"}),Object(c.jsx)("input",{className:"unit-weapon-clips-field",type:"number",placeholder:"#",onChange:function(t){return v(o,e.name,t)},value:e.weaponMags})]})]}),Object(c.jsxs)("form",{className:"unit-item-group",onChange:function(t){return v(a,e.name,t)},children:[Object(c.jsx)("div",{className:"unit-item-attribute",children:"Armor"}),Object(c.jsxs)("label",{className:"unit-item-selection",children:[Object(c.jsx)("input",{type:"radio",name:"item",value:"light",defaultChecked:"light"===e.armor}),"Light"]}),Object(c.jsxs)("label",{className:"unit-item-selection",children:[Object(c.jsx)("input",{type:"radio",name:"item",value:"medium",defaultChecked:"medium"===e.armor}),"Medium"]}),Object(c.jsxs)("label",{className:"unit-item-selection",children:[Object(c.jsx)("input",{type:"radio",name:"item",value:"heavy",defaultChecked:"heavy"===e.armor}),"Heavy"]}),Object(c.jsxs)("label",{className:"unit-item-selection",children:[Object(c.jsx)("input",{type:"radio",name:"item",value:"",defaultChecked:""===e.armor}),"None"]})]}),Object(c.jsxs)("div",{className:"unit-item-group",children:[Object(c.jsx)("div",{className:"unit-item-attribute",children:"Items"}),Object(c.jsxs)("label",{className:"unit-item-selection",children:[Object(c.jsx)("input",{type:"checkbox",value:"scope",defaultChecked:r(e.name,"scope"),onChange:function(t){return y(i,e.name,t)}}),Object(c.jsx)("span",{className:0===e.maxDamage&&r(e.name,"scope")?"unit-stats-warning":"",children:"Scope"})]}),Object(c.jsxs)("label",{className:"unit-item-selection",children:[Object(c.jsx)("input",{type:"checkbox",value:"grenade",defaultChecked:r(e.name,"grenade"),onChange:function(t){return y(i,e.name,t)}}),"Grenade"]}),Object(c.jsxs)("label",{className:"unit-item-selection",children:[Object(c.jsx)("input",{type:"checkbox",value:"medikit",defaultChecked:r(e.name,"medikit"),onChange:function(t){return y(i,e.name,t)}}),"Medikit"]}),Object(c.jsxs)("label",{className:"unit-item-selection",children:[Object(c.jsx)("input",{type:"checkbox",value:"shield",defaultChecked:r(e.name,"shield"),onChange:function(t){return y(i,e.name,t)}}),"Shield"]})]})]}),Object(c.jsx)("div",{className:"unit-stats",children:Object(c.jsx)(b,{unit:e})})]})]},e.name))};for(S.s();!(O=S.n()).done;)x()}catch(N){S.e(N)}finally{S.f()}}return p}var O=function(e){Object(o.a)(n,e);var t=Object(r.a)(n);function n(e){var i;return Object(a.a)(this,n),(i=t.call(this,e)).handleKeyDown=function(e){"Enter"===e.key&&i.createUnit()},i.refreshUnits=function(){h.a.loadUnits(i.state.projectName,i.updateUnits)},i.updateUnits=function(e){if(void 0===e.project||void 0===e.project.name)d.c.info("New units need to be created.");else{if(i.state.projectName!==e.project.name)return d.c.error("Somehow wrong a project was loaded!",{autoClose:1e4}),console.log("Project name mismatch!"),void console.log(i.projectName+" !== "+e.project.name);var t=JSON.parse(e.project.units);if(null===t||void 0===t)return;var n,a=Object(s.a)(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;i.calculateStats(o)}}catch(r){a.e(r)}finally{a.f()}i.setState({units:t})}},i.createUnit=function(){var e=i.state.unitName;if(null!==e&&void 0!==e)if(/^[a-zA-Z0-9]+([_\\-]?[a-zA-Z0-9])*$/.test(e))if(null===i.getUnit(e)){var t=i.state.units;t.push(i.newRookie(e)),i.setState({unitName:"",units:t})}else d.c.error("Unit with this name already exists.",{autoClose:1e4});else d.c.error("Invalid name. Please use a-z, A-Z, 0-9 and -, _ characters. The name cannot start on end with - or _ and cannot have more than two of them in sequence.",{autoClose:15e3});else d.c.error("Please enter a name.",{autoClose:1e4})},i.newRookie=function(e){var t={name:e,weapon:"",armor:"",weaponMags:0,items:[]};return i.calculateStats(t),t},i.onChangeWeapon=function(e,t){var n=i.getUnit(e);null!==n&&(n.weapon=t,""!==t&&n.weaponMags<1?n.weaponMags=1:""===t&&n.weaponMags>0&&(n.weaponMags=0),i.calculateStats(n),i.setState({units:i.state.units}))},i.onChangeArmor=function(e,t){var n=i.getUnit(e);null!==n&&(n.armor=t,i.calculateStats(n),i.setState({units:i.state.units}))},i.onChangeItem=function(e,t,n){var a=i.getUnit(e);if(null!==a){var o=a.items;if(n)null!==o&&void 0!==o||(o=[]),o.push(t);else if(null!==o&&void 0!==o){var r=o.indexOf(t);r>=0&&o.splice(r,1)}a.items=o,i.calculateStats(a),i.setState({units:i.state.units})}},i.changeWeaponMags=function(e,t){if("number"===typeof(t=parseInt(t,10))){t<0&&(t=0);var n=i.getUnit(e);null!==n&&(n.weaponMags=t,i.calculateStats(n),i.setState({units:i.state.units}))}},i.hasItem=function(e,t){var n=i.getUnit(e);return null!==n&&void 0!==n.items&&n.items.indexOf(t)>=0},i.getUnit=function(e){var t,n=i.state.units,a=Object(s.a)(n);try{for(a.s();!(t=a.n()).done;){var o=t.value;if(o.name===e)return o}}catch(r){a.e(r)}finally{a.f()}return null},i.calculateStats=function(e){if(e.cost=i.getCost("rookie"),e.cost+=i.getCost(e.weapon),e.cost+=i.getCost(e.armor),void 0!==e.items){var t,n=Object(s.a)(e.items);try{for(n.s();!(t=n.n()).done;){var a=t.value;e.cost+=i.getCost(a)}}catch(o){n.e(o)}finally{n.f()}}e.aim=65,e.vision=20,e.maxAmmo=0,e.ammo=0,e.crit=0,e.maxDamage=0,e.minDamage=0,e.maxCrit=0,e.minCrit=0,void 0===e.weaponMags&&(e.weaponMags=0),"pistol"===e.weapon&&(e.cost+=i.getCost("pistolMag")*e.weaponMags,e.maxAmmo=4,e.minDamage=1,e.maxDamage=2,e.minCrit=2,e.maxCrit=4),"rifle"===e.weapon&&(e.cost+=i.getCost("rifleMag")*e.weaponMags,e.maxAmmo=3,e.crit=10,e.minDamage=2,e.maxDamage=4,e.minCrit=5,e.maxCrit=7),e.ammo=e.maxAmmo*e.weaponMags,e.movement=14,e.maxItems=1,e.health=3,"light"===e.armor&&(e.movement+=2,e.health+=2),"heavy"===e.armor&&(e.movement-=2,e.maxItems+=1,e.health+=4),"medium"===e.armor&&(e.health+=3),e.items.indexOf("shield")>=0&&(e.health=e.health+"+1"),e.items.indexOf("scope")>=0&&(e.aim+=10)},i.getCost=function(e){switch(e){case"rookie":return 1e3;case"rifle":return 500;case"pistol":return 200;case"rifleMag":return 100;case"pistolMag":return 50;case"grenade":return 350;case"medikit":return 100;case"scope":return 200;case"shield":return 300;case"light":return 800;case"medium":return 500;case"heavy":return 900;default:return 0}},i.getTotalCost=function(){var e,t=0,n=Object(s.a)(i.state.units);try{for(n.s();!(e=n.n()).done;){t+=e.value.cost}}catch(a){n.e(a)}finally{n.f()}return t},i.saveUnits=function(){h.a.saveUnits(i.state.projectName,i.getCleanUnits(),i.unitsSaved)},i.getCleanUnits=function(){var e,t=[],n=Object(s.a)(i.state.units);try{for(n.s();!(e=n.n()).done;){var a=e.value;t.push({name:a.name,weapon:a.weapon,armor:a.armor,items:a.items,weaponMags:parseInt(a.weaponMags,10)})}}catch(o){n.e(o)}finally{n.f()}return console.log(t),t},i.unitsSaved=function(){},i.unSelectEditUnitName=function(){i.setState({renamingUnit:null})},i.editUnitName=function(e){i.setState({renamingUnit:e,newUnitName:e})},i.newUnitName=function(e){if(void 0===e)return i.state.newUnitName;i.setState({newUnitName:e})},i.renameUnit=function(e){if(null!==i.state.renamingUnit&&null!==i.state.newUnitName&&0<i.state.newUnitName.length){var t=i.state.newUnitName;if(null!==i.getUnit(t))return void d.c.error("Unit with this name already exists.",{autoClose:1e4});var n=i.getUnit(e);null!==n&&(n.name=t,i.setState({units:i.state.units}))}},i.removeUnit=function(e){for(var t=i.state.units,n=0;n<t.length;n++)if(t[n].name===e){t.splice(n,1);break}i.setState({units:t})},i.state={projectName:e.project,loggedIn:!1,unitName:"",units:[],newUnitName:null,renamingUnit:null},i}return Object(i.a)(n,[{key:"componentDidMount",value:function(){void 0!==this.props.title&&(document.title=this.props.title),m.a.isLoggedIn()?(this.refreshUnits(),this.setState({loggedIn:!0})):this.setState({loggedIn:!1})}},{key:"render",value:function(){var e=this,t=this.state,n=t.loggedIn,a=t.unitName,i=t.units,o=t.renamingUnit,r=t.projectName;if(!n)return Object(c.jsx)(l.Suspense,{fallback:Object(c.jsx)("div",{children:"Loading..."}),children:Object(c.jsx)(p,{})});var s="";i.length<0&&(s="There are no units. Start by creating a new unit.");var u=this.getTotalCost(),m=1e4;return Object(c.jsxs)("div",{className:"manager-project-container",children:[Object(c.jsxs)("div",{className:"manager-project manager-project-plain",title:s,children:[Object(c.jsxs)("h4",{className:"manager-project-title",children:[r," squad"]}),Object(c.jsx)("div",{children:Object(c.jsxs)("span",{className:u>m?"unit-stats-warning":"",children:[" Total cost: ",u," / ",m]})}),Object(c.jsx)("div",{children:Object(c.jsx)("input",{className:"manager-name-field",type:"text",pattern:"^[a-zA-Z0-9]+([_\\\\-]?[a-zA-Z0-9])*$",placeholder:"New Unit Name",onChange:function(t){return e.setState({unitName:t.target.value})},onKeyDown:this.handleKeyDown,value:a})}),Object(c.jsx)(v,{unitName:a,action:this.createUnit}),Object(c.jsx)("div",{className:"unit-notes",children:"Hints:"}),Object(c.jsxs)("ul",{children:[Object(c.jsx)("li",{children:"Units are controller by name."}),Object(c.jsxs)("li",{children:["Total cost cannot exceed ",m,"."]}),Object(c.jsx)("li",{children:"Remember to add ammo/mags."}),Object(c.jsx)("li",{children:"There is no maximum ammo."}),Object(c.jsx)("li",{children:"Grenade is single use."}),Object(c.jsx)("li",{children:"Grenade always destroy cover."}),Object(c.jsx)("li",{children:"Shield adds +1 armor."}),Object(c.jsx)("li",{children:"Medikit heals 4 health."}),Object(c.jsx)("li",{children:"Flanking adds crit to all weapons."}),Object(c.jsx)("li",{children:"Scope needs a weapon."}),Object(c.jsx)("li",{children:"Pistol can be fired twice / turn."})]}),Object(c.jsx)("button",{className:"manager-new-button active-button",onClick:function(t){t.preventDefault(),e.saveUnits()},children:"Save Units"})]}),Object(c.jsx)(y,{units:i,onChangeWeapon:this.onChangeWeapon,onChangeArmor:this.onChangeArmor,onChangeItem:this.onChangeItem,changeWeaponMags:this.changeWeaponMags,hasItem:this.hasItem,editUnitName:this.editUnitName,renameUnit:this.renameUnit,newUnitName:this.newUnitName,renamingUnit:o,unSelectEditUnitName:this.unSelectEditUnitName,removeUnit:this.removeUnit})]})}}]),n}(u.a.Component);t.default=O},54:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n(14),i=n(6),o=n.n(i),r=n(0),s=n.n(r);function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){if(null==e)return{};var n,a,i=function(e,t){if(null==e)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function f(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}function p(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,a=t.indexOf(":"),i=h(t.slice(0,a)),o=t.slice(a+1).trim();return i.startsWith("webkit")?e[(n=i,n.charAt(0).toUpperCase()+n.slice(1))]=o:e[i]=o,e}),{})}var g=!1;try{g=!0}catch(O){}function j(e){return null===e?null:"object"===c(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function v(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?l({},e,t):{}}function b(e){var t=e.forwardedRef,n=d(e,["forwardedRef"]),i=n.icon,o=n.mask,r=n.symbol,s=n.className,c=n.title,u=j(i),h=v("classes",[].concat(f(function(e){var t,n=e.spin,a=e.pulse,i=e.fixedWidth,o=e.inverse,r=e.border,s=e.listItem,c=e.flip,u=e.size,m=e.rotation,d=e.pull,f=(l(t={"fa-spin":n,"fa-pulse":a,"fa-fw":i,"fa-inverse":o,"fa-border":r,"fa-li":s,"fa-flip-horizontal":"horizontal"===c||"both"===c,"fa-flip-vertical":"vertical"===c||"both"===c},"fa-".concat(u),"undefined"!==typeof u&&null!==u),l(t,"fa-rotate-".concat(m),"undefined"!==typeof m&&null!==m&&0!==m),l(t,"fa-pull-".concat(d),"undefined"!==typeof d&&null!==d),l(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(f).map((function(e){return f[e]?e:null})).filter((function(e){return e}))}(n)),f(s.split(" ")))),p=v("transform","string"===typeof n.transform?a.c.transform(n.transform):n.transform),O=v("mask",j(o)),S=Object(a.a)(u,m({},h,{},p,{},O,{symbol:r,title:c}));if(!S)return function(){var e;!g&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",u),null;var x=S.abstract,N={ref:t};return Object.keys(n).forEach((function(e){b.defaultProps.hasOwnProperty(e)||(N[e]=n[e])})),y(x[0],N)}b.displayName="FontAwesomeIcon",b.propTypes={border:o.a.bool,className:o.a.string,mask:o.a.oneOfType([o.a.object,o.a.array,o.a.string]),fixedWidth:o.a.bool,inverse:o.a.bool,flip:o.a.oneOf(["horizontal","vertical","both"]),icon:o.a.oneOfType([o.a.object,o.a.array,o.a.string]),listItem:o.a.bool,pull:o.a.oneOf(["right","left"]),pulse:o.a.bool,rotation:o.a.oneOf([0,90,180,270]),size:o.a.oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:o.a.bool,symbol:o.a.oneOfType([o.a.bool,o.a.string]),title:o.a.string,transform:o.a.oneOfType([o.a.string,o.a.object]),swapOpacity:o.a.bool},b.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var y=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var i=(n.children||[]).map((function(n){return e(t,n)})),o=Object.keys(n.attributes||{}).reduce((function(e,t){var a=n.attributes[t];switch(t){case"class":e.attrs.className=a,delete n.attributes.class;break;case"style":e.attrs.style=p(a);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=a:e.attrs[h(t)]=a}return e}),{attrs:{}}),r=a.style,s=void 0===r?{}:r,c=d(a,["style"]);return o.attrs.style=m({},o.attrs.style,{},s),t.apply(void 0,[n.tag,m({},o.attrs,{},c)].concat(f(i)))}.bind(null,s.a.createElement)},62:function(e,t,n){"use strict";var a=n(11),i=n(12),o=function(){function e(){Object(a.a)(this,e)}return Object(i.a)(e,null,[{key:"loginUrl",value:function(e,t){fetch(this.ADDRESS+"/login/").then((function(e){return e.json()})).then((function(t){e(t)}),(function(e){t(e)}))}},{key:"authorize",value:function(e,t,n){var a=this;return fetch(this.ADDRESS+"/login/authorize",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({code:e})}).then((function(e){return e.json()})).then((function(e){a.parseJWT(e),t()}),(function(e){n(e)})),!0}},{key:"authenticate",value:function(e,t,n,a){var i=this;return fetch(this.ADDRESS+"/login/authenticate",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()})).then((function(e){i.parseJWT(e),n(e)}),(function(e){a(e)})),!0}},{key:"register",value:function(e,t,n,a,i,o){var r=JSON.stringify({username:e,password:t,email:n,agree:a});return(null===n||void 0===n||n.length<1)&&(r=JSON.stringify({username:e,password:t,agree:a})),fetch(this.ADDRESS+"/login/register",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:r}).then((function(e){return e.json()})).then((function(e){i(e)}),(function(e){o(e)})),!0}},{key:"updateLoginButton",value:function(){e.loginButton&&e.loginButton.updateLoginState()}},{key:"refresh",value:function(t,n){var a=this,i=localStorage.getItem(this.REFRESH_TOKEN);return void 0===i?(n("Not logged in."),!1):(fetch(this.ADDRESS+"/login/refresh",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:i})}).then((function(e){return e.json()})).then((function(i){void 0!==i.success?i.success?a.parseJWT(i)?t():n("Didn't undertand the response from the server."):(e.logout(),void 0!==i.reason?n(i.reason):n("Unsuccessful refresh of access token.")):n("Unknown error on refreshing access token.")}),(function(e){n(e)})),!0)}},{key:"fetchSecureGET",value:function(e,t,n){var a=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=sessionStorage.getItem(this.ACCESS_TOKEN);return void 0===o||this.isAccessTokenExpired()?i?(this.refresh((function(){a.fetchSecureGET(e,t,n,i=!1)}),n),!0):(n("Not logged in."),!1):(fetch(this.ADDRESS+"/secure/"+e,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o},method:"GET"}).then((function(e){return e.json()})).then((function(e){t(e)}),(function(o){i?a.refresh((function(){a.fetchSecureGET(e,t,n,i=!1)}),n):n(o)})),!0)}},{key:"fetchSecurePOST",value:function(e,t,n,a){var i=this,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=sessionStorage.getItem(this.ACCESS_TOKEN);return void 0===r?o?(this.refresh((function(){i.fetchSecurePOST(e,n,a,o=!1)}),a),!0):(a("Not logged in."),!1):(fetch(this.ADDRESS+"/secure/"+e,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+r},method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){n(e)}),(function(r){o?i.refresh((function(){i.fetchSecurePOST(e,t,n,a,o=!1)}),a):a(r)})),!0)}},{key:"getUsername",value:function(){return localStorage.getItem(this.USERNAME)}},{key:"logout",value:function(){sessionStorage.removeItem(this.ACCESS_TOKEN),sessionStorage.removeItem(this.ACCESS_TOKEN_EXPIRY),localStorage.removeItem(this.REFRESH_TOKEN),localStorage.removeItem(this.REFRESH_TOKEN_EXPIRY),localStorage.removeItem(this.USERNAME),this.updateLoginButton()}},{key:"isLoggedIn",value:function(){var t=void 0!==this.getUsername()&&null!==this.getUsername();return t&&e.isRefreshTokenExpired()&&(e.logout(),t=!1),t}},{key:"parseJWT",value:function(e){if(void 0===e.access_token)return this.logout(),!1;sessionStorage.setItem(this.ACCESS_TOKEN,e.access_token),localStorage.setItem(this.REFRESH_TOKEN,e.refresh_token);var t=e.access_token.split(".");if(null!==t&&3===t.length){var n=atob(t[1]);n=JSON.parse(n),sessionStorage.setItem(this.ACCESS_TOKEN_EXPIRY,n.exp)}localStorage.setItem(this.USERNAME,e.username);var a=JSON.parse(atob(e.refresh_token.split(".")[1]));return localStorage.setItem(this.REFRESH_TOKEN_EXPIRY,a.exp),this.updateLoginButton(),!0}},{key:"isAccessTokenExpired",value:function(){var e=sessionStorage.getItem(this.ACCESS_TOKEN_EXPIRY);return void 0===e||null===e||new Date(1e3*parseInt(e))-new Date<0}},{key:"isRefreshTokenExpired",value:function(){var e=localStorage.getItem(this.REFRESH_TOKEN_EXPIRY);return void 0===e||null===e||new Date(1e3*parseInt(e))-new Date<0}},{key:"ACCESS_TOKEN",get:function(){return"access_token"}},{key:"ACCESS_TOKEN_EXPIRY",get:function(){return"access_token_expiry"}},{key:"REFRESH_TOKEN",get:function(){return"refresh_token"}},{key:"REFRESH_TOKEN_EXPIRY",get:function(){return"refresh_token_expiry"}},{key:"USERNAME",get:function(){return"username"}},{key:"ADDRESS",get:function(){return"https://api.brawl.ai"}}]),e}();o.loginButton=null,t.a=o},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(70);function i(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(a.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw r}}}}},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(77);function i(e,t){if(e){if("string"===typeof e)return Object(a.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(a.a)(e,t):void 0}}},77:function(e,t,n){"use strict";function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.d(t,"a",(function(){return a}))},79:function(e,t,n){"use strict";var a=n(63),i=n(11),o=n(12),r=n(62),s=n(7),c=function(){function e(){Object(i.a)(this,e)}return Object(o.a)(e,null,[{key:"defaultFiles",value:function(){return[{name:"New Folder",open:!0,data:[{name:"Hello World.py",data:"# This is example code!\n\nimport json\n\nmessage = json.loads(input())\n\nheight_map = message['heightMap']\n#print(\"map:\", height_map)\n\nunits = message['units']\nprint(\"Got the following units:\")\nfor unit in units:\n    print(unit)\nprint(\"cost of units:\", message['cost']) # Total cost of the squad\n\nmessage = json.loads(input())\nif message['action'] == 'startTurn':\n    print(f\"First turn has started! Got {message['timeLeft']} seconds left and the time is ticking.\")\n\nprint(\"Hello world!\")\n\nprint(\"Lets finish this turn!\")\nprint(json.dumps({\n    'action': 'endTurn'\n}))\n",start:!0}]}]}},{key:"renameProject",value:function(t,n,a){var i=s.c.warning("Renaming "+t+"...",{autoClose:!1});r.a.fetchSecurePOST("rename_project",{oldName:t,newName:n},(function(o){e.finishToast(o,i,"Failed to rename "," renamed to "+n+".",t,a)}),(function(a){e.finishToast(a,i,"Failed to rename "," renamed to "+n+".",t,void 0)}))}},{key:"loadFiles",value:function(t,n){e.postWithToast("get_project_files",t,"Loading files for ","Failed to load files for "," files loaded.",n)}},{key:"loadUnits",value:function(t,n){e.postWithToast("get_project_units",t,"Loading units for ","Failed to load units for "," units loaded.",n)}},{key:"deleteProject",value:function(t,n){e.postWithToast("delete_project",t,"Deleting ","Failed to delete "," deleted.",n)}},{key:"launchProject",value:function(t,n){e.postWithToast("launch_project",t,"Launching ","Failed to launch "," launched.",n)}},{key:"listProjects",value:function(t){e.get("list_projects",t)}},{key:"createProject",value:function(t,n){e.postWithToast("create_project",t,"Creating ","Failed to create "," created.",n)}},{key:"getProgress",value:function(t,n){e.postWithToast("get_project_progress",t,"Loading ","Failed to load "," loaded.",n)}},{key:"getIdleTestResults",value:function(t,n){e.postWithToast("get_project_idle_test",t,"Loading ","Failed to load "," loaded.",n)}},{key:"getDefenderResults",value:function(t,n,a,i){e.postWithToastPayload("get_project_defense",t,{projectName:t,opponentUsername:n,opponentProjectName:a},"Loading ","Failed to load "," loaded.",i)}},{key:"getAttackerResults",value:function(t,n,a,i){e.postWithToastPayload("get_project_attack",t,{projectName:t,opponentUsername:n,opponentProjectName:a},"Loading ","Failed to load "," loaded.",i)}},{key:"getAttackerAndDefenderResults",value:function(t,n,a){e.postWithToastPayload("get_project_attack_and_defense",t,{projectName1:t,projectName2:n},"Loading ","Failed to load "," loaded.",a)}},{key:"post",value:function(e,t,n){r.a.fetchSecurePOST(e,{name:t},(function(e){n&&n(e)}),(function(t){console.log("POST ERROR: "+e),console.log(t),void 0!==t&&null!==t&&t.toString().length<100&&s.c.error(t.toString(),{autoClose:1e4})}))}},{key:"get",value:function(e,t){r.a.fetchSecureGET(e,(function(e){t&&t(e)}),(function(t){console.log("GET ERROR: "+e),console.log(t),void 0!==t&&null!==t&&t.toString().length<100&&s.c.error(t.toString(),{autoClose:1e4})}))}},{key:"duplicateProject",value:function(t,n,a){var i=s.c.warning("Duplicating "+t+"...",{autoClose:!1});r.a.fetchSecurePOST("duplicate_project",{name:t,duplicateName:n},(function(n){e.finishToast(n,i,"Failed to duplicate "," duplicated.",t,a)}),(function(n){e.finishToast(n,i,"Failed to duplicate "," duplicated.",t,void 0)}))}},{key:"postWithToast",value:function(t,n,a,i,o,c){var l=s.c.warning(a+n+"...",{autoClose:!1});r.a.fetchSecurePOST(t,{name:n},(function(t){e.finishToast(t,l,i,o,n,c(t))}),(function(t){e.finishToast(t,l,i,o,n,void 0)}))}},{key:"postWithToastPayload",value:function(t,n,a,i,o,c,l){var u=s.c.warning(i+n+"...",{autoClose:!1});r.a.fetchSecurePOST(t,a,(function(t){e.finishToast(t,u,o,c,n,l(t))}),(function(t){e.finishToast(t,u,o,c,n,void 0)}))}},{key:"saveFiles",value:function(t,n,a){var i=s.c.warning("Saving "+t+"...",{autoClose:!1});r.a.fetchSecurePOST("save_project_files",{name:t,files:JSON.stringify(n)},(function(n){e.finishToast(n,i,"Failed to save "," saved.",t,a)}),(function(n){e.finishToast(n,i,"Failed to save "," saved.",t,void 0)}))}},{key:"saveUnits",value:function(t,n,a){var i=s.c.warning("Saving "+t+"...",{autoClose:!1});r.a.fetchSecurePOST("save_project_units",{name:t,units:JSON.stringify(n)},(function(n){e.finishToast(n,i,"Failed to save "," saved.",t,a)}),(function(n){e.finishToast(n,i,"Failed to save "," saved.",t,void 0)}))}},{key:"finishToast",value:function(e,t,n,i,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(void 0!==e)if(void 0!==e.success)if(e.success)s.c.update(t,{render:o+i,type:s.c.TYPE.SUCCESS,autoClose:500}),void 0!==r&&r();else if(void 0!==e.reason)if("field"===e.reason){var c,l="",u=Object(a.a)(e.field);try{for(u.s();!(c=u.n()).done;){var m=c.value;l.length>0&&(l+=" "),l+=m.reason}}catch(d){u.e(d)}finally{u.f()}s.c.update(t,{render:n+o+": "+l,type:s.c.TYPE.ERROR,autoClose:1e4})}else s.c.update(t,{render:n+o+": "+e.reason,type:s.c.TYPE.ERROR,autoClose:1e4});else s.c.update(t,{render:n+o+".",type:s.c.TYPE.ERROR,autoClose:1e4});else void 0!==e.reason?s.c.update(t,{render:n+o+": "+e.reason,type:s.c.TYPE.ERROR,autoClose:1e4}):(s.c.update(t,{render:n+o+": "+e,type:s.c.TYPE.ERROR,autoClose:1e4}),console.log(e));else s.c.update(t,{render:n+o+".",type:s.c.TYPE.ERROR,autoClose:1e4}),console.log("results is undefined!")}},{key:"timeSince",value:function(e){if(null===e||void 0===e||""===e)return"not yet";var t=Math.floor((Date.now()-Date.parse(e))/1e3),n=Math.floor(t/31536e3);return n>=1?n+(1===n?" year":" years"):(n=Math.floor(t/2592e3))>=1?n+(1===n?" month":" months"):(n=Math.floor(t/86400))>=1?n+(1===n?" day":" days"):(n=Math.floor(t/3600))>=1?n+(1===n?" hour":" hours"):(n=Math.floor(t/60))>=1?n+(1===n?" minute":" minutes"):Math.floor(t)+(1===n?" second":" seconds")}}]),e}();t.a=c}}]);