(this.webpackJsonppages=this.webpackJsonppages||[]).push([[194],{106:function(e,t,n){"use strict";function o(e){if(Array.isArray(e))return e}n.d(t,"a",(function(){return o}))},107:function(e,t,n){"use strict";function o(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,"a",(function(){return o}))},133:function(e,t,n){"use strict";var o=n(11),i=n(12),a=n(62),r=n(79),s=n(7),c=function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,null,[{key:"fetchGET",value:function(e,t,n){return fetch(this.ADDRESS+"/open/"+e,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"GET"}).then((function(e){return e.json()})).then((function(e){t(e)}),(function(e){n(e)})),!0}},{key:"fetchPOST",value:function(e,t,n,o){return fetch(a.a.ADDRESS+"/open/"+e,{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){n(e)}),(function(e){o(e)})),!0}},{key:"getRanking",value:function(t,n,o,i){e.fetchPOST("get_ranking",{rank:t,count:n},o,(function(e){s.c.error("Failed to load ranking results.",{autoClose:1e4}),null!=i&&i(e)}))}},{key:"getBrawl",value:function(t,n,o,i,a){e.postWithToastPayload("get_brawl",n,{attackerUsername:t,attackerProjectName:n,defenderUsername:o,defenderProjectName:i},"Loading ","Failed to load "," loaded.",a)}},{key:"getProgress",value:function(t,n,o){e.postWithToastPayload("get_progress",n,{username:t,projectName:n},"Loading ","Failed to load "," loaded.",o)}},{key:"post",value:function(t,n,o){e.fetchPOST(t,{name:n},(function(e){o&&o(e)}),(function(e){console.log("POST ERROR: "+t),console.log(e),void 0!==e&&null!==e&&e.toString().length<100&&s.c.error(e.toString(),{autoClose:1e4})}))}},{key:"get",value:function(t,n){e.fetchGET(t,(function(e){n&&n(e)}),(function(e){console.log("GET ERROR: "+t),console.log(e),void 0!==e&&null!==e&&e.toString().length<100&&s.c.error(e.toString(),{autoClose:1e4})}))}},{key:"postWithToast",value:function(t,n,o,i,a,c){var u=s.c.warning(o+n+"...",{autoClose:!1});e.fetchPOST(t,{name:n},(function(e){r.a.finishToast(e,u,i,a,n,c(e))}),(function(e){r.a.finishToast(e,u,i,a,n,void 0)}))}},{key:"postWithToastPayload",value:function(t,n,o,i,a,c,u){var l=s.c.warning(i+n+"...",{autoClose:!1});e.fetchPOST(t,o,(function(e){r.a.finishToast(e,l,a,c,n,u(e))}),(function(e){r.a.finishToast(e,l,a,c,n,void 0)}))}}]),e}();t.a=c},459:function(e,t,n){"use strict";n.r(t);var o=n(95),i=n(63),a=n(1),r=n(0),s=n(133),c=n(79),u=n(13);function l(e){var t,n=e.items,o=[],r=Object(i.a)(n);try{for(r.s();!(t=r.n()).done;){var s=t.value,l="/progress?project="+s.projectName+"&author="+s.username;o.push(Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:s.rank}),Object(a.jsx)("td",{children:Object(a.jsx)(u.b,{className:"inline",to:l,children:s.projectName})}),Object(a.jsx)("td",{children:Object(a.jsx)("span",{title:new Date(s.rankTime).toString(),children:c.a.timeSince(s.rankTime)})}),Object(a.jsxs)("td",{title:s.country,children:[Object(a.jsx)("span",{className:"flag-icon flag-icon-"+s.countryCode.toLowerCase()+" ranking-flag-size"}),s.username]})]},s.rank))}}catch(f){r.e(f)}finally{r.f()}return o}t.default=function(e){var t=e.count;Object(r.useEffect)((function(){document.title=e.title}),[e.title]);var n=Object(r.useState)([]),i=Object(o.a)(n,2),c=i[0],f=i[1],d=Object(r.useState)(!1),h=Object(o.a)(d,2),p=h[0],g=h[1],v=100,S=null!=t?parseInt(t):1;return(!Number.isInteger(S)||S<1)&&(S=1),Object(r.useEffect)((function(){s.a.getRanking(S,v,(function(e){var t=!0;null!=e&&null!=e.success&&(e.success&&null!=e.ranking?(f(e.ranking),t=!1):null!=e.reason&&(g(e.reason),t=!1)),t&&g("Failed to fetch results.")}))}),[t]),p?Object(a.jsxs)("div",{className:"conditional-page-indent",children:[Object(a.jsx)("h2",{children:"Ranking of the best bots"}),Object(a.jsx)("div",{children:p}),Object(a.jsx)(u.b,{to:S-v<=1?"/observe":"/observe/"+(S-v),className:"inline link-space",children:"Previous"})]}):Object(a.jsxs)("div",{className:"conditional-page-indent",children:[Object(a.jsx)("h2",{children:"Ranking of the best bots"}),Object(a.jsx)("table",{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Rank"}),Object(a.jsx)("th",{children:"Bot"}),Object(a.jsx)("th",{children:"Age"}),Object(a.jsx)("th",{children:"Author"})]}),Object(a.jsx)(l,{items:c})]})}),0===c.length?Object(a.jsx)("div",{children:"Loading..."}):"",1!==S?Object(a.jsx)(u.b,{to:S-v<=1?"/observe":"/observe/"+(S-v),className:"inline",children:"Previous"}):"",c.length===v?Object(a.jsx)(u.b,{to:"/observe/"+(S+v),className:"inline",children:"Next"}):""]})}},62:function(e,t,n){"use strict";var o=n(11),i=n(12),a=function(){function e(){Object(o.a)(this,e)}return Object(i.a)(e,null,[{key:"loginUrl",value:function(e,t){fetch(this.ADDRESS+"/login/").then((function(e){return e.json()})).then((function(t){e(t)}),(function(e){t(e)}))}},{key:"authorize",value:function(e,t,n){var o=this;return fetch(this.ADDRESS+"/login/authorize",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({code:e})}).then((function(e){return e.json()})).then((function(e){o.parseJWT(e),t()}),(function(e){n(e)})),!0}},{key:"authenticate",value:function(e,t,n,o){var i=this;return fetch(this.ADDRESS+"/login/authenticate",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()})).then((function(e){i.parseJWT(e),n(e)}),(function(e){o(e)})),!0}},{key:"register",value:function(e,t,n,o,i,a){var r=JSON.stringify({username:e,password:t,email:n,agree:o});return(null===n||void 0===n||n.length<1)&&(r=JSON.stringify({username:e,password:t,agree:o})),fetch(this.ADDRESS+"/login/register",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:r}).then((function(e){return e.json()})).then((function(e){i(e)}),(function(e){a(e)})),!0}},{key:"updateLoginButton",value:function(){e.loginButton&&e.loginButton.updateLoginState()}},{key:"refresh",value:function(t,n){var o=this,i=localStorage.getItem(this.REFRESH_TOKEN);return void 0===i?(n("Not logged in."),!1):(fetch(this.ADDRESS+"/login/refresh",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:i})}).then((function(e){return e.json()})).then((function(i){void 0!==i.success?i.success?o.parseJWT(i)?t():n("Didn't undertand the response from the server."):(e.logout(),void 0!==i.reason?n(i.reason):n("Unsuccessful refresh of access token.")):n("Unknown error on refreshing access token.")}),(function(e){n(e)})),!0)}},{key:"fetchSecureGET",value:function(e,t,n){var o=this,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=sessionStorage.getItem(this.ACCESS_TOKEN);return void 0===a||this.isAccessTokenExpired()?i?(this.refresh((function(){o.fetchSecureGET(e,t,n,i=!1)}),n),!0):(n("Not logged in."),!1):(fetch(this.ADDRESS+"/secure/"+e,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a},method:"GET"}).then((function(e){return e.json()})).then((function(e){t(e)}),(function(a){i?o.refresh((function(){o.fetchSecureGET(e,t,n,i=!1)}),n):n(a)})),!0)}},{key:"fetchSecurePOST",value:function(e,t,n,o){var i=this,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=sessionStorage.getItem(this.ACCESS_TOKEN);return void 0===r?a?(this.refresh((function(){i.fetchSecurePOST(e,n,o,a=!1)}),o),!0):(o("Not logged in."),!1):(fetch(this.ADDRESS+"/secure/"+e,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+r},method:"POST",body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){n(e)}),(function(r){a?i.refresh((function(){i.fetchSecurePOST(e,t,n,o,a=!1)}),o):o(r)})),!0)}},{key:"getUsername",value:function(){return localStorage.getItem(this.USERNAME)}},{key:"logout",value:function(){sessionStorage.removeItem(this.ACCESS_TOKEN),sessionStorage.removeItem(this.ACCESS_TOKEN_EXPIRY),localStorage.removeItem(this.REFRESH_TOKEN),localStorage.removeItem(this.REFRESH_TOKEN_EXPIRY),localStorage.removeItem(this.USERNAME),this.updateLoginButton()}},{key:"isLoggedIn",value:function(){var t=void 0!==this.getUsername()&&null!==this.getUsername();return t&&e.isRefreshTokenExpired()&&(e.logout(),t=!1),t}},{key:"parseJWT",value:function(e){if(void 0===e.access_token)return this.logout(),!1;sessionStorage.setItem(this.ACCESS_TOKEN,e.access_token),localStorage.setItem(this.REFRESH_TOKEN,e.refresh_token);var t=e.access_token.split(".");if(null!==t&&3===t.length){var n=atob(t[1]);n=JSON.parse(n),sessionStorage.setItem(this.ACCESS_TOKEN_EXPIRY,n.exp)}localStorage.setItem(this.USERNAME,e.username);var o=JSON.parse(atob(e.refresh_token.split(".")[1]));return localStorage.setItem(this.REFRESH_TOKEN_EXPIRY,o.exp),this.updateLoginButton(),!0}},{key:"isAccessTokenExpired",value:function(){var e=sessionStorage.getItem(this.ACCESS_TOKEN_EXPIRY);return void 0===e||null===e||new Date(1e3*parseInt(e))-new Date<0}},{key:"isRefreshTokenExpired",value:function(){var e=localStorage.getItem(this.REFRESH_TOKEN_EXPIRY);return void 0===e||null===e||new Date(1e3*parseInt(e))-new Date<0}},{key:"ACCESS_TOKEN",get:function(){return"access_token"}},{key:"ACCESS_TOKEN_EXPIRY",get:function(){return"access_token_expiry"}},{key:"REFRESH_TOKEN",get:function(){return"refresh_token"}},{key:"REFRESH_TOKEN_EXPIRY",get:function(){return"refresh_token_expiry"}},{key:"USERNAME",get:function(){return"username"}},{key:"ADDRESS",get:function(){return"https://api.brawl.ai"}}]),e}();a.loginButton=null,t.a=a},63:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(70);function i(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(o.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var i=0,a=function(){};return{s:a,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,c=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,r=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw r}}}}},70:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var o=n(77);function i(e,t){if(e){if("string"===typeof e)return Object(o.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(o.a)(e,t):void 0}}},77:function(e,t,n){"use strict";function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}n.d(t,"a",(function(){return o}))},79:function(e,t,n){"use strict";var o=n(63),i=n(11),a=n(12),r=n(62),s=n(7),c=function(){function e(){Object(i.a)(this,e)}return Object(a.a)(e,null,[{key:"defaultFiles",value:function(){return[{name:"New Folder",open:!0,data:[{name:"Hello World.py",data:"# This is example code!\n\nimport json\n\nmessage = json.loads(input())\n\nheight_map = message['heightMap']\n#print(\"map:\", height_map)\n\nunits = message['units']\nprint(\"Got the following units:\")\nfor unit in units:\n    print(unit)\nprint(\"cost of units:\", message['cost']) # Total cost of the squad\n\nmessage = json.loads(input())\nif message['action'] == 'startTurn':\n    print(f\"First turn has started! Got {message['timeLeft']} seconds left and the time is ticking.\")\n\nprint(\"Hello world!\")\n\nprint(\"Lets finish this turn!\")\nprint(json.dumps({\n    'action': 'endTurn'\n}))\n",start:!0}]}]}},{key:"renameProject",value:function(t,n,o){var i=s.c.warning("Renaming "+t+"...",{autoClose:!1});r.a.fetchSecurePOST("rename_project",{oldName:t,newName:n},(function(a){e.finishToast(a,i,"Failed to rename "," renamed to "+n+".",t,o)}),(function(o){e.finishToast(o,i,"Failed to rename "," renamed to "+n+".",t,void 0)}))}},{key:"loadFiles",value:function(t,n){e.postWithToast("get_project_files",t,"Loading files for ","Failed to load files for "," files loaded.",n)}},{key:"loadUnits",value:function(t,n){e.postWithToast("get_project_units",t,"Loading units for ","Failed to load units for "," units loaded.",n)}},{key:"deleteProject",value:function(t,n){e.postWithToast("delete_project",t,"Deleting ","Failed to delete "," deleted.",n)}},{key:"launchProject",value:function(t,n){e.postWithToast("launch_project",t,"Launching ","Failed to launch "," launched.",n)}},{key:"listProjects",value:function(t){e.get("list_projects",t)}},{key:"createProject",value:function(t,n){e.postWithToast("create_project",t,"Creating ","Failed to create "," created.",n)}},{key:"getProgress",value:function(t,n){e.postWithToast("get_project_progress",t,"Loading ","Failed to load "," loaded.",n)}},{key:"getIdleTestResults",value:function(t,n){e.postWithToast("get_project_idle_test",t,"Loading ","Failed to load "," loaded.",n)}},{key:"getDefenderResults",value:function(t,n,o,i){e.postWithToastPayload("get_project_defense",t,{projectName:t,opponentUsername:n,opponentProjectName:o},"Loading ","Failed to load "," loaded.",i)}},{key:"getAttackerResults",value:function(t,n,o,i){e.postWithToastPayload("get_project_attack",t,{projectName:t,opponentUsername:n,opponentProjectName:o},"Loading ","Failed to load "," loaded.",i)}},{key:"getAttackerAndDefenderResults",value:function(t,n,o){e.postWithToastPayload("get_project_attack_and_defense",t,{projectName1:t,projectName2:n},"Loading ","Failed to load "," loaded.",o)}},{key:"post",value:function(e,t,n){r.a.fetchSecurePOST(e,{name:t},(function(e){n&&n(e)}),(function(t){console.log("POST ERROR: "+e),console.log(t),void 0!==t&&null!==t&&t.toString().length<100&&s.c.error(t.toString(),{autoClose:1e4})}))}},{key:"get",value:function(e,t){r.a.fetchSecureGET(e,(function(e){t&&t(e)}),(function(t){console.log("GET ERROR: "+e),console.log(t),void 0!==t&&null!==t&&t.toString().length<100&&s.c.error(t.toString(),{autoClose:1e4})}))}},{key:"duplicateProject",value:function(t,n,o){var i=s.c.warning("Duplicating "+t+"...",{autoClose:!1});r.a.fetchSecurePOST("duplicate_project",{name:t,duplicateName:n},(function(n){e.finishToast(n,i,"Failed to duplicate "," duplicated.",t,o)}),(function(n){e.finishToast(n,i,"Failed to duplicate "," duplicated.",t,void 0)}))}},{key:"postWithToast",value:function(t,n,o,i,a,c){var u=s.c.warning(o+n+"...",{autoClose:!1});r.a.fetchSecurePOST(t,{name:n},(function(t){e.finishToast(t,u,i,a,n,c(t))}),(function(t){e.finishToast(t,u,i,a,n,void 0)}))}},{key:"postWithToastPayload",value:function(t,n,o,i,a,c,u){var l=s.c.warning(i+n+"...",{autoClose:!1});r.a.fetchSecurePOST(t,o,(function(t){e.finishToast(t,l,a,c,n,u(t))}),(function(t){e.finishToast(t,l,a,c,n,void 0)}))}},{key:"saveFiles",value:function(t,n,o){var i=s.c.warning("Saving "+t+"...",{autoClose:!1});r.a.fetchSecurePOST("save_project_files",{name:t,files:JSON.stringify(n)},(function(n){e.finishToast(n,i,"Failed to save "," saved.",t,o)}),(function(n){e.finishToast(n,i,"Failed to save "," saved.",t,void 0)}))}},{key:"saveUnits",value:function(t,n,o){var i=s.c.warning("Saving "+t+"...",{autoClose:!1});r.a.fetchSecurePOST("save_project_units",{name:t,units:JSON.stringify(n)},(function(n){e.finishToast(n,i,"Failed to save "," saved.",t,o)}),(function(n){e.finishToast(n,i,"Failed to save "," saved.",t,void 0)}))}},{key:"finishToast",value:function(e,t,n,i,a){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(void 0!==e)if(void 0!==e.success)if(e.success)s.c.update(t,{render:a+i,type:s.c.TYPE.SUCCESS,autoClose:500}),void 0!==r&&r();else if(void 0!==e.reason)if("field"===e.reason){var c,u="",l=Object(o.a)(e.field);try{for(l.s();!(c=l.n()).done;){var f=c.value;u.length>0&&(u+=" "),u+=f.reason}}catch(d){l.e(d)}finally{l.f()}s.c.update(t,{render:n+a+": "+u,type:s.c.TYPE.ERROR,autoClose:1e4})}else s.c.update(t,{render:n+a+": "+e.reason,type:s.c.TYPE.ERROR,autoClose:1e4});else s.c.update(t,{render:n+a+".",type:s.c.TYPE.ERROR,autoClose:1e4});else void 0!==e.reason?s.c.update(t,{render:n+a+": "+e.reason,type:s.c.TYPE.ERROR,autoClose:1e4}):(s.c.update(t,{render:n+a+": "+e,type:s.c.TYPE.ERROR,autoClose:1e4}),console.log(e));else s.c.update(t,{render:n+a+".",type:s.c.TYPE.ERROR,autoClose:1e4}),console.log("results is undefined!")}},{key:"timeSince",value:function(e){if(null===e||void 0===e||""===e)return"not yet";var t=Math.floor((Date.now()-Date.parse(e))/1e3),n=Math.floor(t/31536e3);return n>=1?n+(1===n?" year":" years"):(n=Math.floor(t/2592e3))>=1?n+(1===n?" month":" months"):(n=Math.floor(t/86400))>=1?n+(1===n?" day":" days"):(n=Math.floor(t/3600))>=1?n+(1===n?" hour":" hours"):(n=Math.floor(t/60))>=1?n+(1===n?" minute":" minutes"):Math.floor(t)+(1===n?" second":" seconds")}}]),e}();t.a=c},95:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(106);var i=n(70),a=n(107);function r(e,t){return Object(o.a)(e)||function(e,t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e)){var n=[],o=!0,i=!1,a=void 0;try{for(var r,s=e[Symbol.iterator]();!(o=(r=s.next()).done)&&(n.push(r.value),!t||n.length!==t);o=!0);}catch(c){i=!0,a=c}finally{try{o||null==s.return||s.return()}finally{if(i)throw a}}return n}}(e,t)||Object(i.a)(e,t)||Object(a.a)()}}}]);