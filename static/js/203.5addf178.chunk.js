(this.webpackJsonppages=this.webpackJsonppages||[]).push([[203],{58:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var o=n(16),r=n(15),i=n.n(r),a=n(0),s=n.n(a);function c(e){return(c="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},i=Object.keys(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function g(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function h(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}function d(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,o=t.indexOf(":"),r=h(t.slice(0,o)),i=t.slice(o+1).trim();return r.startsWith("webkit")?e[(n=r,n.charAt(0).toUpperCase()+n.slice(1))]=i:e[r]=i,e}),{})}var m=!1;try{m=!0}catch(S){}function y(e){return o.c.icon?o.c.icon(e):null===e?null:"object"===c(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function b(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?l({},e,t):{}}function v(e){var t=e.forwardedRef,n=p(e,["forwardedRef"]),r=n.icon,i=n.mask,a=n.symbol,s=n.className,c=n.title,u=n.titleId,h=y(r),d=b("classes",[].concat(g(function(e){var t,n=e.spin,o=e.pulse,r=e.fixedWidth,i=e.inverse,a=e.border,s=e.listItem,c=e.flip,u=e.size,f=e.rotation,p=e.pull,g=(l(t={"fa-spin":n,"fa-pulse":o,"fa-fw":r,"fa-inverse":i,"fa-border":a,"fa-li":s,"fa-flip-horizontal":"horizontal"===c||"both"===c,"fa-flip-vertical":"vertical"===c||"both"===c},"fa-".concat(u),"undefined"!==typeof u&&null!==u),l(t,"fa-rotate-".concat(f),"undefined"!==typeof f&&null!==f&&0!==f),l(t,"fa-pull-".concat(p),"undefined"!==typeof p&&null!==p),l(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(g).map((function(e){return g[e]?e:null})).filter((function(e){return e}))}(n)),g(s.split(" ")))),S=b("transform","string"===typeof n.transform?o.c.transform(n.transform):n.transform),j=b("mask",y(i)),E=Object(o.a)(h,f({},d,{},S,{},j,{symbol:a,title:c,titleId:u}));if(!E)return function(){var e;!m&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",h),null;var k=E.abstract,N={ref:t};return Object.keys(n).forEach((function(e){v.defaultProps.hasOwnProperty(e)||(N[e]=n[e])})),O(k[0],N)}v.displayName="FontAwesomeIcon",v.propTypes={border:i.a.bool,className:i.a.string,mask:i.a.oneOfType([i.a.object,i.a.array,i.a.string]),fixedWidth:i.a.bool,inverse:i.a.bool,flip:i.a.oneOf(["horizontal","vertical","both"]),icon:i.a.oneOfType([i.a.object,i.a.array,i.a.string]),listItem:i.a.bool,pull:i.a.oneOf(["right","left"]),pulse:i.a.bool,rotation:i.a.oneOf([0,90,180,270]),size:i.a.oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:i.a.bool,symbol:i.a.oneOfType([i.a.bool,i.a.string]),title:i.a.string,transform:i.a.oneOfType([i.a.string,i.a.object]),swapOpacity:i.a.bool},v.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var O=function e(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var r=(n.children||[]).map((function(n){return e(t,n)})),i=Object.keys(n.attributes||{}).reduce((function(e,t){var o=n.attributes[t];switch(t){case"class":e.attrs.className=o,delete n.attributes.class;break;case"style":e.attrs.style=d(o);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=o:e.attrs[h(t)]=o}return e}),{attrs:{}}),a=o.style,s=void 0===a?{}:a,c=p(o,["style"]);return i.attrs.style=f({},i.attrs.style,{},s),t.apply(void 0,[n.tag,f({},i.attrs,{},c)].concat(g(r)))}.bind(null,s.a.createElement)},68:function(e,t,n){"use strict";var o=n(9),r=n(10),i=function(){function e(){Object(o.a)(this,e)}return Object(r.a)(e,null,[{key:"loginUrl",value:function(e,t){fetch(this.ADDRESS+"/login/").then((function(e){return e.json()})).then((function(t){e(t)}),(function(e){t(e)}))}},{key:"authorize",value:function(e,t,n){var o=this;return fetch(this.ADDRESS+"/login/authorize",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({code:e})}).then((function(e){return e.json()})).then((function(e){o.parseJWT(e),t()}),(function(e){n(e)})),!0}},{key:"authenticate",value:function(e,t,n,o){var r=this;return fetch(this.ADDRESS+"/login/authenticate",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()})).then((function(e){r.parseJWT(e),n(e)}),(function(e){o(e)})),!0}},{key:"register",value:function(e,t,n,o,r,i){var a=JSON.stringify({username:e,password:t,email:n,agree:o});return(null===n||void 0===n||n.length<1)&&(a=JSON.stringify({username:e,password:t,agree:o})),fetch(this.ADDRESS+"/login/register",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){r(e)}),(function(e){i(e)})),!0}},{key:"updateLoginButton",value:function(){e.loginButton&&e.loginButton.updateLoginState()}},{key:"refresh",value:function(t,n){var o=this,r=localStorage.getItem(this.REFRESH_TOKEN);return void 0===r?(n("Not logged in."),!1):(fetch(this.ADDRESS+"/login/refresh",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:r})}).then((function(e){return e.json()})).then((function(r){void 0!==r.success?r.success?o.parseJWT(r)?t():n("Didn't undertand the response from the server."):(e.logout(),void 0!==r.reason?n(r.reason):n("Unsuccessful refresh of access token.")):n("Unknown error on refreshing access token.")}),(function(e){n(e)})),!0)}},{key:"fetchSecureGET",value:function(e,t,n){var o=this,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=sessionStorage.getItem(this.ACCESS_TOKEN);return void 0===i||this.isAccessTokenExpired()?r?(this.refresh((function(){o.fetchSecureGET(e,t,n,r=!1)}),n),!0):(n("Not logged in."),!1):(fetch(this.ADDRESS+"/secure/"+e,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+i},method:"GET"}).then((function(i){401===i.status&&r?o.refresh((function(){o.fetchSecureGET(e,t,n,r=!1)}),n):i.json().then((function(e){t(e)}),(function(e){n(e)}))})),!0)}},{key:"fetchSecurePOST",value:function(e,t,n,o){var r=this,i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=sessionStorage.getItem(this.ACCESS_TOKEN);return void 0===a?i?(this.refresh((function(){r.fetchSecurePOST(e,n,o,i=!1)}),o),!0):(o("Not logged in."),!1):(fetch(this.ADDRESS+"/secure/"+e,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a},method:"POST",body:JSON.stringify(t)}).then((function(a){401===a.status&&i?r.refresh((function(){r.fetchSecurePOST(e,t,n,o,i=!1)}),o):a.json().then((function(e){n(e)}),(function(e){o(e)}))})),!0)}},{key:"getUsername",value:function(){return localStorage.getItem(this.USERNAME)}},{key:"logout",value:function(){sessionStorage.removeItem(this.ACCESS_TOKEN),sessionStorage.removeItem(this.ACCESS_TOKEN_EXPIRY),localStorage.removeItem(this.REFRESH_TOKEN),localStorage.removeItem(this.REFRESH_TOKEN_EXPIRY),localStorage.removeItem(this.USERNAME),this.updateLoginButton()}},{key:"isLoggedIn",value:function(){var t=void 0!==this.getUsername()&&null!==this.getUsername();return t&&e.isRefreshTokenExpired()&&(e.logout(),t=!1),t}},{key:"parseJWT",value:function(e){if(void 0===e.access_token)return this.logout(),!1;sessionStorage.setItem(this.ACCESS_TOKEN,e.access_token),localStorage.setItem(this.REFRESH_TOKEN,e.refresh_token);var t=e.access_token.split(".");if(null!==t&&3===t.length){var n=atob(t[1]);n=JSON.parse(n),sessionStorage.setItem(this.ACCESS_TOKEN_EXPIRY,n.exp)}localStorage.setItem(this.USERNAME,e.username);var o=JSON.parse(atob(e.refresh_token.split(".")[1]));return localStorage.setItem(this.REFRESH_TOKEN_EXPIRY,o.exp),this.updateLoginButton(),!0}},{key:"isAccessTokenExpired",value:function(){var e=sessionStorage.getItem(this.ACCESS_TOKEN_EXPIRY);return void 0===e||null===e||new Date(1e3*parseInt(e))-new Date<0}},{key:"isRefreshTokenExpired",value:function(){var e=localStorage.getItem(this.REFRESH_TOKEN_EXPIRY);return void 0===e||null===e||new Date(1e3*parseInt(e))-new Date<0}},{key:"ACCESS_TOKEN",get:function(){return"access_token"}},{key:"ACCESS_TOKEN_EXPIRY",get:function(){return"access_token_expiry"}},{key:"REFRESH_TOKEN",get:function(){return"refresh_token"}},{key:"REFRESH_TOKEN_EXPIRY",get:function(){return"refresh_token_expiry"}},{key:"USERNAME",get:function(){return"username"}},{key:"ADDRESS",get:function(){return"https://api.brawl.ai"}}]),e}();i.loginButton=null,t.a=i},770:function(e,t,n){"use strict";n.r(t);var o=n(9),r=n(10),i=n(11),a=n(12),s=n(0),c=n.n(s),l=n(14),u=n(68),f=n(58),p=n(1),g=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).logout=function(e){e.preventDefault(),u.a.logout(),r.setState({loggedIn:!1}),r.state.setParentState&&r.state.setParentState(!1),window.location.replace("https://api.brawl.ai/logout")},r.updateLoginState=function(){var e=u.a.isLoggedIn();r.setState({loggedIn:e,username:u.a.getUsername()}),r.state.setParentState&&r.state.setParentState(e)},r.state={loggedIn:!1,username:null,onClickAction:e.onClickAction},r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.updateLoginState(),u.a.loginButton=this}},{key:"render",value:function(){var e=this.state,t=e.loggedIn,n=e.username,o=e.onClickAction;if(t){var r="Logged in as "+n+". \nPress here to logout\nor manage account.";return Object(p.jsxs)(l.b,{className:"navigation-item navigation-item-logged-in",to:"account",title:r,onClick:o,children:[Object(p.jsx)(f.a,{icon:"user",className:"navigation-login-button-icon"}),Object(p.jsx)("span",{className:"navigation-login-button-name",children:"Account"})]})}return Object(p.jsxs)(l.b,{className:"navigation-item navigation-item-logging-in",to:"login",title:"Not logged in.\nPress here to login or register.",onClick:o,children:[Object(p.jsx)(f.a,{icon:"user",className:"navigation-login-button-icon"}),Object(p.jsx)("span",{className:"navigation-login-button-name",children:"Account"})]})}}]),n}(c.a.Component),h=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(o.a)(this,n),(r=t.call(this,e)).setLoginState=function(e){r.setState({loggedIn:e})},r.toggleMenu=function(){var e="none";r.menuDisplay===e&&(e="inherit"),r.menuDisplay=e,document.documentElement.style.setProperty("--nav-item-display",e)},r.collapseMenu=function(){var e="none";r.menuDisplay=e,document.documentElement.style.setProperty("--nav-item-display",e)},r.state={loggedIn:!1},r.menuDisplay="none",r}return Object(r.a)(n,[{key:"componentDidMount",value:function(){this.setState({loggedIn:u.a.isLoggedIn()})}},{key:"render",value:function(){return Object(p.jsxs)("header",{className:"navigation-bar",children:[Object(p.jsxs)("span",{className:"navigation-first",children:[Object(p.jsxs)(l.c,{to:"/",title:"Go to homepage.",children:[Object(p.jsx)("img",{className:"navigation-logo",src:"/logo.svg",alt:"Logo"}),Object(p.jsxs)("span",{className:"navigation-shorttitle",children:["brawl.ai",Object(p.jsx)("sup",{className:"title-superscript",children:"\u03b2"})]}),Object(p.jsxs)("span",{className:"navigation-fulltitle",children:["Brawl Artificial Intelligence",Object(p.jsx)("sup",{className:"title-superscript",children:"Beta"})]})]}),Object(p.jsx)("button",{className:"navigation-menu-button",onClick:this.toggleMenu,children:Object(p.jsx)(f.a,{icon:"bars"})})]}),Object(p.jsx)(l.c,{className:"navigation-item",to:"/guide",onClick:this.collapseMenu,title:"The rule book.\nData formats.\nControl messages.",children:"Guide"}),Object(p.jsx)(l.c,{className:"navigation-item",to:"/participate",onClick:this.collapseMenu,title:"Join the brawl!\nCreate new projects.\nModify old ones.",children:"Participate"}),Object(p.jsx)(l.c,{className:"navigation-item",to:"/observe",onClick:this.collapseMenu,title:"How am I doing?\nHow are others doing?\nWhat is the situation?",children:"Observe"}),Object(p.jsx)(l.c,{className:"navigation-item",to:"/about",onClick:this.collapseMenu,title:"Contact.\nPrivacy statement.\nTerms and conditions.",children:"About"}),Object(p.jsx)(g,{setLoginState:this.setLoginState,onClickAction:this.toggleMenu})]})}}]),n}(c.a.Component);t.default=h}}]);