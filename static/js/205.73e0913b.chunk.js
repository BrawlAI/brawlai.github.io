(this.webpackJsonppages=this.webpackJsonppages||[]).push([[205],{291:function(e,t,n){"use strict";var i=n(37),r=n(9),o=n(10),a=n(86),s=n(6),l=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0;Object(r.a)(this,e),this.projectLoaded=function(n){var i=!1;if(void 0===n.project||void 0===n.project.name||null===n.project.files||void 0===n.project.files||""===n.project.files)t.files=[],t.saveState=e.dirty,i=!0;else{if(t.projectName!==n.project.name)return s.c.error("Somehow a wrong project was loaded!",{autoClose:1e4}),console.log("Project name mismatch!"),void console.log(t.projectName+" !== "+n.project.name);t.files=JSON.parse(n.project.files),t.saveState=e.saved,i=!1}void 0!==n.project&&void 0!==n.project.status&&(t.readOnly="editing"!=n.project.status),t.readyCallback(i,t.readOnly)},this.compareRootFiles=function(e,n){return"Deleted"===e.name?1:"Deleted"===n.name?-1:t.compareFiles(e,n)},this.compareFiles=function(t,n){var i=e.isFolder(t),r=e.isFolder(n);return i&&!r?-1:r&&!i?1:t.name===n.name?0:t.name<n.name?-1:1},this.projectName=n,this.readyCallback=i,this.files=null,this.saveState=e.dirty,this.readOnly=!1,a.a.loadFiles(n,this.projectLoaded)}return Object(o.a)(e,[{key:"dirtyFiles",value:function(){this.readOnly||this.setSaveState(e.dirty)}},{key:"setSaveState",value:function(t){if(t!==this.saveState){if(t===e.saved&&this.saveState===e.saving)return this.saveState=e.saved,void(void 0!==this.notifySave&&this.notifySave());this.saveState=t,t!==e.dirty||void 0!==this.notifyUnsave&&this.notifyUnsave()}}},{key:"getFileFromPath",value:function(t){for(var n=this.files,i=null,r=0,o=!1,a=0;a<t.length;a++){for(var s=!1,l=0;l<n.length;l++)if(n[l].name===t[a]){if(s=!0,r=l,i=n[l],a===t.length-1){o=!0;break}e.isFolder(n[l])&&(n=n[l].data);break}if(!s)break}return o?{file:i,folder:n,index:r}:null}},{key:"copyFileNames",value:function(e){var t=[];if(null===e||0>=e.length)return t;for(var n=0;n<e.length;n++){var i=e[n],r={name:i.name};this.isFolder(i)&&(r.data=this.copyFileNames(i.data)),t.push(r)}return t}},{key:"mkdirs",value:function(t){for(var n=this.files,i=null,r=!1,o=0;o<t.length-1;o++){for(var a=!1,s=0;s<n.length;s++)if(n[s].name===t[o]){i=n[s],e.isFolder(i)&&(n=i.data),a=!0;break}a||(i={name:t[o],data:[],open:!0},n.push(i),n=i.data,r=!0)}return{folder:n,file:i,isNew:r}}},{key:"removeDeletedFolderIfEmpty",value:function(){for(var t=this.files,n=0;n<t.length;n++)if(e.deletedFolderName===t[n].name)return void(0>=t[n].data.length&&t.splice(n))}},{key:"removeFolderIfEmpty",value:function(t){for(var n=this.files,i=0,r=!1,o=0;o<t.length-1;o++){for(var a=!1,s=0;s<n.length;s++)if(n[s].name===t[o]){a=!0;var l=n[s];if(e.isFolder(l)){n=l.data;for(var u=0;u<n.length;u++){var c=n[u];if(!e.isFolder(c)){i=o+1;break}}}}if(!a){r=!0;break}}if(!r&&!(t.length-1<=i)&&0===n.length){n=this.files;for(var d=0;d<t.length-1;d++)for(var f=0;f<n.length;f++)if(n[f].name===t[d]){if(i===d)return void n.splice(f,1);var h=n[f];e.isFolder(h)&&(n=h.data)}}}},{key:"openFile",value:function(t){var n=this.getFileFromPath(t);return n.isFolder=e.isFolder(n.file),n.isFolder&&(n.file.open=!n.file.open,this.dirtyFiles()),n}},{key:"newFile",value:function(t,n){var i="New Folder",r=t.slice();r.push(i);var o=this.mkdirs(r);return null!=n||(n="",i="New File.py"),i=e.findNewName({file:{name:i},folder:o.folder}),o.folder.push({name:i,data:n}),null!==o.file&&(o.file.open=!0),this.sortAllFiles(),this.dirtyFiles(),!0}},{key:"newDragFile",value:function(t,n,i){var r=t.slice();r.push(n);var o=this.mkdirs(r),a=e.findNewName({file:{name:n},folder:o.folder});return o.folder.push({name:a,data:i}),null!==o.file&&(o.file.open=!0),this.sortAllFiles(),this.dirtyFiles(),!0}},{key:"removeFile",value:function(t){if(!(null===t||0>=t.length)){var n=this.getFileFromPath(t);if(!n)return!1;if(t[0]!==e.deletedFolderName){var i=[e.deletedFolderName].concat(t),r=this.mkdirs(i),o=e.exists(r.folder,n.file.name);if(o&&e.isFolder(o)&&e.isFolder(n.file))e.mergeFolders(n.file.data,o.data);else{var a=e.findNewName({file:{name:n.file.name},folder:r.folder});n.file.name=a,r.folder.push(n.file)}}return n.folder.splice(n.index,1),this.removeFolderIfEmpty(t),this.removeDeletedFolderIfEmpty(),this.sortAllFiles(),this.dirtyFiles(),!0}}},{key:"moveFile",value:function(t,n){if(1===t.length&&(n&&n.length<1||!n))return!1;var i=this.getFileFromPath(t);if(!i)return!1;var r=this.files;if(n&&n.length>0){var o=n.slice();if(o.push(i.file.name),e.isSubset(t,o))return!1;var a=this.mkdirs(o);r=a.folder,a.file&&(a.file.open=!0)}var s=e.findNewName({file:{name:i.file.name},folder:r});if(s!==i.file.name&&e.isFolder(i.file)){var l=e.exists(r,i.file.name);if(e.isFolder(l))return e.removeFromFolder(i.folder,i.file.name),e.mergeFolders(i.file.data,l.data),this.sortAllFiles(),!0}return i.file.name=s,r.push(i.file),i.folder.splice(i.index,1),this.sortAllFiles(),this.dirtyFiles(),!0}},{key:"duplicateFile",value:function(t){var n=this.getFileFromPath(t);if(!n)return!1;var i={name:e.findNewName(n),data:(" "+n.file.data).slice(1)};return n.folder.push(i),this.sortAllFiles(),this.dirtyFiles(),!0}},{key:"restoreFile",value:function(t){if(this.dirtyFiles(),e.deletedFolderName===t[0]){var n=t.slice(1,t.length-2);if(this.moveFile(t,n))return this.removeFolderIfEmpty(t),this.removeDeletedFolderIfEmpty(),!0}return!1}},{key:"renameFile",value:function(t,n){if(1===t.length&&"Deleted"===n)return!1;this.dirtyFiles();var i=this.getFileFromPath(t);return!(!i||e.exists(i.folder,n))&&(i.file.name=n,this.sortAllFiles(),!0)}},{key:"sortAllFiles",value:function(){this.files.sort(this.compareRootFiles);for(var t=0;t<this.files.length;t++){var n=this.files[t];e.isFolder(n)&&this.sortFolder(n.data)}}},{key:"sortFolder",value:function(t){t.sort(this.compareFiles);for(var n=0;n<t.length;n++){var i=t[n];e.isFolder(i)&&this.sortFolder(i.data)}}},{key:"setStartFile",value:function(e){this.removeStartFlag(this.files);var t=this.getFileFromPath(e);t&&(t.file.start=!0),this.dirtyFiles()}},{key:"removeStartFlag",value:function(t){var n,r=Object(i.a)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;o.start&&delete o.start,e.isFolder(o)&&this.removeStartFlag(o.data)}}catch(a){r.e(a)}finally{r.f()}}},{key:"save",value:function(){var t=this;this.setSaveState(e.saving),a.a.saveFiles(this.projectName,this.files,(function(){t.setSaveState(e.saved)}))}}],[{key:"pathToString",value:function(e){return null==e?null:e.join("/")}},{key:"isFolderEmpty",value:function(t){var n,r=Object(i.a)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(!e.isFolder(o))return!1;if(!e.isFolderEmpty(o))return!1}}catch(a){r.e(a)}finally{r.f()}return!0}},{key:"exists",value:function(e,t){var n,r=Object(i.a)(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o.name===t)return o}}catch(a){r.e(a)}finally{r.f()}return null}},{key:"removeFromFolder",value:function(e,t){for(var n in e)e[n].name===t&&e.splice(n,1)}},{key:"findNewName",value:function(t){var n=t.file.name,i=n.lastIndexOf("."),r="";-1!==i&&(r=n.substr(i),n=n.substr(0,i));var o=n+r,a=t.folder,s=0,l=e.findFilenameAndCounter(n);for(l&&(s=l.counter,n=l.name);e.exists(a,o);)o=n+"("+ ++s+")"+r;return o}},{key:"findFilenameAndCounter",value:function(e){var t=e.indexOf("(");if(-1===t)return null;var n=e.indexOf("(",t+1);if(-1!==n)return null;var i=e.indexOf(")");if(-1===i)return null;if(-1!==(n=e.indexOf(")",i+1)))return null;if(t>=i)return null;var r=Number(e.slice(t+1,i));return isNaN(r)?null:(r=Math.floor(r),{name:e.slice(0,t),counter:r})}},{key:"mergeFolders",value:function(t,n){for(var i=t.length-1;i>=0;i--){var r=t[i],o=e.exists(n,r.name);if(o){if(e.isFolder(r)&&e.isFolder(o)){e.mergeFolders(r.data,o.data);continue}var a=e.findNewName({file:{name:r.name},folder:n});r.name=a,n.push(r),t.splice(i,1)}else n.push(r),t.splice(i,1)}return!0}},{key:"equals",value:function(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}},{key:"isSubset",value:function(t,n){if(e.equals(t,n))return!0;if(null===t||null===n)return!1;if(t.length>=n.length)return!1;for(var i in t)if(t[i]!==n[i])return!1;return!0}},{key:"isFolder",value:function(e){return Array===e.data.constructor}}]),e}();l.deletedFolderName="Deleted",l.saved=3,l.dirty=1,l.saving=2,t.a=l},37:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(58);function r(e,t){var n;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=Object(i.a)(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,l=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return s=e.done,e},e:function(e){l=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(l)throw a}}}}},508:function(e,t,n){"use strict";n.r(t);var i=n(9),r=n(10),o=n(11),a=n(12),s=n(0),l=n.n(s),u=n(291),c=n(59),d=n(61),f=n(1),h=Object(s.lazy)((function(){return n.e(2).then(n.bind(null,221))})),p=Object(s.lazy)((function(){return n.e(211).then(n.bind(null,364))})),v=Object(s.lazy)((function(){return Promise.all([n.e(190),n.e(238)]).then(n.bind(null,365))})),m=Object(s.lazy)((function(){return n.e(239).then(n.bind(null,441))}));function y(e){var t=e.updateCodeFromEditor,n=e.registerEditorResize,i=e.registerEditorSave,r=e.currentFile,o=e.currentFilePathString,a=e.saveViewStateAndModel,l=e.viewState,u=e.model,d=e.readOnly;return null!=r?Object(f.jsx)("div",{className:"editor-main-panel",children:Object(f.jsx)(s.Suspense,{fallback:Object(f.jsx)("div",{children:"Loading..."}),children:Object(f.jsx)(v,{code:r.data,update:t,registerResizeEvent:n,registerEditorSave:i,saveViewStateAndModel:a,viewState:l,model:u,filePath:o,readOnly:d},o)})}):Object(f.jsxs)("div",{className:"editor-empty",children:[Object(f.jsx)(c.a,{icon:"hand-point-left"})," Select a file from the side panel to get started."]})}function g(e){var t=e.emptySelection;return Object(f.jsx)("div",{className:"editor-pane",children:Object(f.jsxs)("div",{className:"editor-empty",children:[Object(f.jsx)("div",{children:"Please select how you'd like to start:"}),Object(f.jsx)("div",{className:"editor-empty-button-div",children:Object(f.jsx)("button",{onClick:function(e){e.preventDefault(),t([])},className:"inline",children:"Empty project"})}),Object(f.jsx)("div",{className:"editor-empty-button-div",children:Object(f.jsx)("button",{onClick:function(e){e.preventDefault(),t([{name:"New Folder",open:!0,data:[{name:"Hello World.py",data:"\n\nprint('Hello World!')\n",start:!0}]}])},className:"inline",children:"Hello World!"})}),Object(f.jsx)("div",{className:"editor-empty-button-div",children:Object(f.jsx)("button",{onClick:function(e){e.preventDefault(),fetch("/examples/bot_single.json").then((function(e){return e.text()})).then((function(e){t(JSON.parse(e))}))},className:"inline",children:"Example bot, single file"})}),Object(f.jsx)("div",{className:"editor-empty-button-div",children:Object(f.jsx)("button",{onClick:function(e){e.preventDefault(),fetch("/examples/bot_multiple.json").then((function(e){return e.text()})).then((function(e){t(JSON.parse(e))}))},className:"inline",children:"Example bot, two files"})})]})})}var S=function(e){Object(o.a)(n,e);var t=Object(a.a)(n);function n(e){var r;return Object(i.a)(this,n),(r=t.call(this,e)).readyCallback=function(e,t){r.setState({ready:!0,empty:e,readOnly:t})},r.emptySelection=function(e){r.state.fileHandler.files=e,r.setState({empty:!1})},r.updateCodeFromEditor=function(e){r.state.currentFile.data=e,r.state.fileHandler.dirtyFiles()},r.openFile=function(e,t){null!==e?r.setState({currentFile:t,currentFilePath:e}):r.setState({currentFile:null,currentFilePath:null})},r.updateCurrentFilePath=function(e){r.setState({currentFilePath:e})},r.resetEditorSize=function(){null!==r.state.editor&&(r.state.editor.layout({width:0,height:0}),r.state.editor.layout())},r.panelResize=function(){r.resetEditorSize()},r.registerEditorResize=function(e){r.setState({editor:e})},r.keyDownEvent=function(e){"s"===e.key&&(navigator.platform.match("Mac")?e.metaKey:e.ctrlKey)&&(e.preventDefault(),r.registerEditorSave())},r.registerEditorSave=function(){null!==r.sidePanelSave&&r.sidePanelSave()},r.registerSidePanelSave=function(e){r.sidePanelSave=e},r.hideSidePanel=function(){document.documentElement.style.setProperty("--editor-side-panel-display","none"),document.documentElement.style.setProperty("--editor-side-panel-button-display","block"),r.panelResize()},r.showSidePanel=function(){document.documentElement.style.setProperty("--editor-side-panel-display","block"),document.documentElement.style.setProperty("--editor-side-panel-button-display","none")},r.onClickCubeButton=function(e){e.preventDefault(),r.showSidePanel()},r.saveViewStateAndModel=function(e,t,n){var i=r.state,o=i.viewStateMap,a=i.modelMap;o.set(e,t),a.set(e,n)},r.state={projectName:e.project,currentFile:null,currentFilePath:null,fileHandler:null,editor:null,ready:!1,loggedIn:!1,viewStateMap:new Map,modelMap:new Map},r.sidePanelSave=null,r}return Object(r.a)(n,[{key:"closeEditor",value:function(){this.props.closeEditor()}},{key:"componentDidMount",value:function(){if(void 0!==this.props.title&&(document.title=this.props.title),d.a.isLoggedIn()){window.addEventListener("resize",this.resetEditorSize),document.addEventListener("keydown",this.keyDownEvent),this.showSidePanel();var e=new u.a(this.state.projectName,this.readyCallback);this.setState({fileHandler:e,loggedIn:!0})}else this.setState({loggedIn:!1})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resetEditorSize),document.removeEventListener("keydown",this.keyDownEvent),this.state.modelMap.forEach((function(e){null!=e&&e.dispose()}))}},{key:"render",value:function(){var e=this.state,t=e.projectName,n=e.currentFile,i=e.currentFilePath,r=e.fileHandler,o=e.ready,a=e.loggedIn,l=e.empty,d=e.viewStateMap,v=e.modelMap,S=e.readOnly;if(!a)return Object(f.jsx)(s.Suspense,{fallback:Object(f.jsx)("div",{children:"Loading..."}),children:Object(f.jsx)(h,{})});if(!o)return Object(f.jsx)("div",{children:"Loading..."});if(l)return Object(f.jsx)(g,{emptySelection:this.emptySelection});var j=u.a.pathToString(i),b=null;d.has(j)&&(b=d.get(j));var O=null;return v.has(j)&&(O=v.get(j)),Object(f.jsxs)("div",{className:"editor-pane",children:[Object(f.jsx)(s.Suspense,{fallback:Object(f.jsx)("div",{children:"Loading..."}),children:Object(f.jsx)(p,{openFile:this.openFile,updateCurrentFilePath:this.updateCurrentFilePath,projectName:t,fileHandler:r,registerSidePanelSave:this.registerSidePanelSave,hideSidePanel:this.hideSidePanel,readOnly:S})}),Object(f.jsx)(s.Suspense,{fallback:Object(f.jsx)("div",{children:"Loading..."}),children:Object(f.jsx)(m,{handleResize:this.panelResize,hideSidePanel:this.hideSidePanel})}),Object(f.jsx)("div",{className:"editor-cube-button",children:Object(f.jsx)("button",{onClick:this.onClickCubeButton,children:Object(f.jsx)(c.a,{icon:"cube"})})}),Object(f.jsx)(y,{updateCodeFromEditor:this.updateCodeFromEditor,registerEditorResize:this.registerEditorResize,registerEditorSave:this.registerEditorSave,saveViewStateAndModel:this.saveViewStateAndModel,currentFile:n,currentFilePathString:j,viewState:b,model:O,readOnly:S})]})}}]),n}(l.a.Component);t.default=S},58:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var i=n(68);function r(e,t){if(e){if("string"===typeof e)return Object(i.a)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(i.a)(e,t):void 0}}},59:function(e,t,n){"use strict";n.d(t,"a",(function(){return S}));var i=n(16),r=n(15),o=n.n(r),a=n(0),s=n.n(a);function l(e){return(l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t){if(null==e)return{};var n,i,r=function(e,t){if(null==e)return{};var n,i,r={},o=Object.keys(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(i=0;i<o.length;i++)n=o[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}function h(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function p(e){return t=e,(t-=0)===t?e:(e=e.replace(/[\-_\s]+(.)?/g,(function(e,t){return t?t.toUpperCase():""}))).substr(0,1).toLowerCase()+e.substr(1);var t}function v(e){return e.split(";").map((function(e){return e.trim()})).filter((function(e){return e})).reduce((function(e,t){var n,i=t.indexOf(":"),r=p(t.slice(0,i)),o=t.slice(i+1).trim();return r.startsWith("webkit")?e[(n=r,n.charAt(0).toUpperCase()+n.slice(1))]=o:e[r]=o,e}),{})}var m=!1;try{m=!0}catch(b){}function y(e){return i.c.icon?i.c.icon(e):null===e?null:"object"===l(e)&&e.prefix&&e.iconName?e:Array.isArray(e)&&2===e.length?{prefix:e[0],iconName:e[1]}:"string"===typeof e?{prefix:"fas",iconName:e}:void 0}function g(e,t){return Array.isArray(t)&&t.length>0||!Array.isArray(t)&&t?u({},e,t):{}}function S(e){var t=e.forwardedRef,n=f(e,["forwardedRef"]),r=n.icon,o=n.mask,a=n.symbol,s=n.className,l=n.title,c=n.titleId,p=y(r),v=g("classes",[].concat(h(function(e){var t,n=e.spin,i=e.pulse,r=e.fixedWidth,o=e.inverse,a=e.border,s=e.listItem,l=e.flip,c=e.size,d=e.rotation,f=e.pull,h=(u(t={"fa-spin":n,"fa-pulse":i,"fa-fw":r,"fa-inverse":o,"fa-border":a,"fa-li":s,"fa-flip-horizontal":"horizontal"===l||"both"===l,"fa-flip-vertical":"vertical"===l||"both"===l},"fa-".concat(c),"undefined"!==typeof c&&null!==c),u(t,"fa-rotate-".concat(d),"undefined"!==typeof d&&null!==d&&0!==d),u(t,"fa-pull-".concat(f),"undefined"!==typeof f&&null!==f),u(t,"fa-swap-opacity",e.swapOpacity),t);return Object.keys(h).map((function(e){return h[e]?e:null})).filter((function(e){return e}))}(n)),h(s.split(" ")))),b=g("transform","string"===typeof n.transform?i.c.transform(n.transform):n.transform),O=g("mask",y(o)),E=Object(i.a)(p,d({},v,{},b,{},O,{symbol:a,title:l,titleId:c}));if(!E)return function(){var e;!m&&console&&"function"===typeof console.error&&(e=console).error.apply(e,arguments)}("Could not find icon",p),null;var F=E.abstract,k={ref:t};return Object.keys(n).forEach((function(e){S.defaultProps.hasOwnProperty(e)||(k[e]=n[e])})),j(F[0],k)}S.displayName="FontAwesomeIcon",S.propTypes={border:o.a.bool,className:o.a.string,mask:o.a.oneOfType([o.a.object,o.a.array,o.a.string]),fixedWidth:o.a.bool,inverse:o.a.bool,flip:o.a.oneOf(["horizontal","vertical","both"]),icon:o.a.oneOfType([o.a.object,o.a.array,o.a.string]),listItem:o.a.bool,pull:o.a.oneOf(["right","left"]),pulse:o.a.bool,rotation:o.a.oneOf([0,90,180,270]),size:o.a.oneOf(["lg","xs","sm","1x","2x","3x","4x","5x","6x","7x","8x","9x","10x"]),spin:o.a.bool,symbol:o.a.oneOfType([o.a.bool,o.a.string]),title:o.a.string,transform:o.a.oneOfType([o.a.string,o.a.object]),swapOpacity:o.a.bool},S.defaultProps={border:!1,className:"",mask:null,fixedWidth:!1,inverse:!1,flip:null,icon:null,listItem:!1,pull:null,pulse:!1,rotation:null,size:null,spin:!1,symbol:!1,title:"",transform:null,swapOpacity:!1};var j=function e(t,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if("string"===typeof n)return n;var r=(n.children||[]).map((function(n){return e(t,n)})),o=Object.keys(n.attributes||{}).reduce((function(e,t){var i=n.attributes[t];switch(t){case"class":e.attrs.className=i,delete n.attributes.class;break;case"style":e.attrs.style=v(i);break;default:0===t.indexOf("aria-")||0===t.indexOf("data-")?e.attrs[t.toLowerCase()]=i:e.attrs[p(t)]=i}return e}),{attrs:{}}),a=i.style,s=void 0===a?{}:a,l=f(i,["style"]);return o.attrs.style=d({},o.attrs.style,{},s),t.apply(void 0,[n.tag,d({},o.attrs,{},l)].concat(h(r)))}.bind(null,s.a.createElement)},61:function(e,t,n){"use strict";var i=n(9),r=n(10),o=function(){function e(){Object(i.a)(this,e)}return Object(r.a)(e,null,[{key:"ACCESS_TOKEN",get:function(){return"access_token"}},{key:"ACCESS_TOKEN_EXPIRY",get:function(){return"access_token_expiry"}},{key:"REFRESH_TOKEN",get:function(){return"refresh_token"}},{key:"REFRESH_TOKEN_EXPIRY",get:function(){return"refresh_token_expiry"}},{key:"USERNAME",get:function(){return"username"}},{key:"ADDRESS",get:function(){return"https://api.brawl.ai"}},{key:"loginUrl",value:function(e,t){fetch(this.ADDRESS+"/login/").then((function(e){return e.json()})).then((function(t){e(t)}),(function(e){t(e)}))}},{key:"authorize",value:function(e,t,n){var i=this;return fetch(this.ADDRESS+"/login/authorize",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({code:e})}).then((function(e){return e.json()})).then((function(e){i.parseJWT(e),t()}),(function(e){n(e)})),!0}},{key:"changePassword",value:function(e,t,n,i){return fetch(this.ADDRESS+"/login/change_password",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:this.getUsername(),oldPassword:e,newPassword:t})}).then((function(e){return e.json()})).then((function(e){n(e)}),(function(e){i(e)})),!0}},{key:"requestPasswordResetCode",value:function(e,t,n){return fetch(this.ADDRESS+"/login/reset_password_request",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({email:e})}).then((function(e){return e.json()})).then((function(e){t(e)}),(function(e){n(e)})),!0}},{key:"consumePasswordResetCode",value:function(e,t,n,i){return fetch(this.ADDRESS+"/login/reset_password",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({code:e,password:t})}).then((function(e){return e.json()})).then((function(e){n(e)}),(function(e){i(e)})),!0}},{key:"requestAddEmail",value:function(e,t,n,i){return fetch(this.ADDRESS+"/login/add_email",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:this.getUsername(),email:e,password:t})}).then((function(e){return e.json()})).then((function(e){n(e)}),(function(e){i(e)})),!0}},{key:"requestEmailRemovalCode",value:function(t,n,i){return fetch(this.ADDRESS+"/login/remove_email_request",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:this.getUsername(),password:t})}).then((function(e){return e.json()})).then((function(t){null!=t.success&&t.success&&(e.emailDeletionWarning=!0,e.updateWarning()),n(t)}),(function(e){i(e)})),!0}},{key:"removeEmailWithoutCode",value:function(t,n,i){return fetch(this.ADDRESS+"/login/remove_email_without_code",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:this.getUsername(),password:t})}).then((function(e){return e.json()})).then((function(t){null!=t.success&&t.success&&(e.emailDeletionWarning=!1,e.updateWarning()),n(t)}),(function(e){i(e)})),!0}},{key:"removeEmailWithCode",value:function(t,n,i){return fetch(this.ADDRESS+"/login/remove_email_with_code",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({code:t})}).then((function(e){return e.json()})).then((function(t){null!=t.success&&t.success&&e.getRegisteredEmail((function(){}),(function(){})),n(t)}),(function(e){i(e)})),!0}},{key:"getRegisteredEmail",value:function(t,n){var i=this,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=sessionStorage.getItem(this.ACCESS_TOKEN);return void 0===o||this.isAccessTokenExpired()?r?(this.refresh((function(){i.getRegisteredEmail(t,n,r=!1)}),n),!0):(n("Not logged in."),!1):(fetch(this.ADDRESS+"/login/get_email",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:o})}).then((function(e){if(401!==e.status||!r)return e.json();i.refresh((function(){i.getRegisteredEmail(t,n,r=!1)}),n)})).then((function(n){e.emailDeletionWarning=null!=n.emailExpiry,e.updateWarning(),t(n)}),(function(e){n(e)})),!0)}},{key:"authenticate",value:function(e,t,n,i){var r=this;return fetch(this.ADDRESS+"/login/authenticate",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({username:e,password:t})}).then((function(e){return e.json()})).then((function(e){r.parseJWT(e),n(e)}),(function(e){i(e)})),!0}},{key:"register",value:function(e,t,n,i,r,o){var a=JSON.stringify({username:e,password:t,email:n,agree:i});return(null===n||void 0===n||n.length<1)&&(a=JSON.stringify({username:e,password:t,agree:i})),fetch(this.ADDRESS+"/login/register",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:a}).then((function(e){return e.json()})).then((function(e){r(e)}),(function(e){o(e)})),!0}},{key:"updateLoginButton",value:function(){e.loginButton&&e.loginButton.updateLoginState()}},{key:"updateWarning",value:function(){null!=e.loginButton&&e.loginButton.updateWarning()}},{key:"refresh",value:function(t,n){var i=this,r=localStorage.getItem(this.REFRESH_TOKEN);return void 0===r?(n("Not logged in."),!1):(fetch(this.ADDRESS+"/login/refresh",{headers:{Accept:"application/json","Content-Type":"application/json"},method:"POST",body:JSON.stringify({token:r})}).then((function(e){return e.json()})).then((function(r){void 0!==r.success?r.success?i.parseJWT(r)?t():n("Didn't undertand the response from the server."):(e.logout(),void 0!==r.reason?n(r.reason):n("Unsuccessful refresh of access token.")):n("Unknown error on refreshing access token.")}),(function(e){n(e)})),!0)}},{key:"fetchSecureGET",value:function(e,t,n){var i=this,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=sessionStorage.getItem(this.ACCESS_TOKEN);return void 0===o||this.isAccessTokenExpired()?r?(this.refresh((function(){i.fetchSecureGET(e,t,n,r=!1)}),n),!0):(n("Not logged in."),!1):(fetch(this.ADDRESS+"/secure/"+e,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+o},method:"GET"}).then((function(o){401===o.status&&r?i.refresh((function(){i.fetchSecureGET(e,t,n,r=!1)}),n):o.json().then((function(e){t(e)}),(function(e){n(e)}))})),!0)}},{key:"fetchSecurePOST",value:function(e,t,n,i){var r=this,o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=sessionStorage.getItem(this.ACCESS_TOKEN);return void 0===a?o?(this.refresh((function(){r.fetchSecurePOST(e,n,i,o=!1)}),i),!0):(i("Not logged in."),!1):(fetch(this.ADDRESS+"/secure/"+e,{headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer "+a},method:"POST",body:JSON.stringify(t)}).then((function(a){401===a.status&&o?r.refresh((function(){r.fetchSecurePOST(e,t,n,i,o=!1)}),i):a.json().then((function(e){n(e)}),(function(e){i(e)}))})),!0)}},{key:"getUsername",value:function(){return localStorage.getItem(this.USERNAME)}},{key:"logout",value:function(){sessionStorage.removeItem(this.ACCESS_TOKEN),sessionStorage.removeItem(this.ACCESS_TOKEN_EXPIRY),localStorage.removeItem(this.REFRESH_TOKEN),localStorage.removeItem(this.REFRESH_TOKEN_EXPIRY),localStorage.removeItem(this.USERNAME),this.updateLoginButton()}},{key:"isLoggedIn",value:function(){var t=void 0!==this.getUsername()&&null!==this.getUsername();return t&&e.isRefreshTokenExpired()&&(e.logout(),t=!1),t}},{key:"parseJWT",value:function(e){if(void 0===e.access_token)return this.logout(),!1;sessionStorage.setItem(this.ACCESS_TOKEN,e.access_token),localStorage.setItem(this.REFRESH_TOKEN,e.refresh_token);var t=e.access_token.split(".");if(null!==t&&3===t.length){var n=atob(t[1]);n=JSON.parse(n),sessionStorage.setItem(this.ACCESS_TOKEN_EXPIRY,n.exp)}localStorage.setItem(this.USERNAME,e.username);var i=JSON.parse(atob(e.refresh_token.split(".")[1]));return localStorage.setItem(this.REFRESH_TOKEN_EXPIRY,i.exp),this.updateLoginButton(),!0}},{key:"isAccessTokenExpired",value:function(){var e=sessionStorage.getItem(this.ACCESS_TOKEN_EXPIRY);return void 0===e||null===e||new Date(1e3*parseInt(e))-new Date<0}},{key:"isRefreshTokenExpired",value:function(){var e=localStorage.getItem(this.REFRESH_TOKEN_EXPIRY);return void 0===e||null===e||new Date(1e3*parseInt(e))-new Date<0}}]),e}();o.emailDeletionWarning=!1,o.loginButton=null,t.a=o},68:function(e,t,n){"use strict";function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}n.d(t,"a",(function(){return i}))},86:function(e,t,n){"use strict";var i=n(37),r=n(9),o=n(10),a=n(61),s=n(6),l=function(){function e(){Object(r.a)(this,e)}return Object(o.a)(e,null,[{key:"renameProject",value:function(t,n,i){var r=s.c.warning("Renaming "+t+"...",{autoClose:!1});a.a.fetchSecurePOST("rename_project",{oldName:t,newName:n},(function(o){e.finishToast(o,r,"Failed to rename "," renamed to "+n+".",t,i)}),(function(i){e.finishToast(i,r,"Failed to rename "," renamed to "+n+".",t,void 0)}))}},{key:"loadFiles",value:function(t,n){e.postWithToast("get_project_files",t,"Loading files for ","Failed to load files for "," files loaded.",n)}},{key:"loadUnits",value:function(t,n){e.postWithToast("get_project_units",t,"Loading units for ","Failed to load units for "," units loaded.",n)}},{key:"deleteProject",value:function(t,n){e.postWithToast("delete_project",t,"Deleting ","Failed to delete "," deleted.",n)}},{key:"launchProject",value:function(t,n){e.postWithToast("launch_project",t,"Launching ","Failed to launch "," launched.",n)}},{key:"listProjects",value:function(t){e.get("list_projects",t)}},{key:"createProject",value:function(t,n){e.postWithToast("create_project",t,"Creating ","Failed to create "," created.",n)}},{key:"getProgress",value:function(t,n){e.postWithToast("get_project_progress",t,"Loading ","Failed to load "," loaded.",n)}},{key:"getIdleTestResults",value:function(t,n){e.postWithToast("get_project_idle_test",t,"Loading ","Failed to load "," loaded.",n)}},{key:"getDefenderResults",value:function(t,n,i,r){e.postWithToastPayload("get_project_defense",t,{projectName:t,opponentUsername:n,opponentProjectName:i},"Loading ","Failed to load "," loaded.",r)}},{key:"getAttackerResults",value:function(t,n,i,r){e.postWithToastPayload("get_project_attack",t,{projectName:t,opponentUsername:n,opponentProjectName:i},"Loading ","Failed to load "," loaded.",r)}},{key:"getAttackerAndDefenderResults",value:function(t,n,i){e.postWithToastPayload("get_project_attack_and_defense",t,{projectName1:t,projectName2:n},"Loading ","Failed to load "," loaded.",i)}},{key:"post",value:function(e,t,n){a.a.fetchSecurePOST(e,{name:t},(function(e){n&&n(e)}),(function(t){console.log("POST ERROR: "+e),console.log(t),void 0!==t&&null!==t&&t.toString().length<100&&s.c.error(t.toString(),{autoClose:1e4})}))}},{key:"get",value:function(e,t){a.a.fetchSecureGET(e,(function(e){t&&t(e)}),(function(t){console.log("GET ERROR: "+e),console.log(t),void 0!==t&&null!==t&&t.toString().length<100&&s.c.error(t.toString(),{autoClose:1e4})}))}},{key:"duplicateProject",value:function(t,n,i){var r=s.c.warning("Duplicating "+t+"...",{autoClose:!1});a.a.fetchSecurePOST("duplicate_project",{name:t,duplicateName:n},(function(n){e.finishToast(n,r,"Failed to duplicate "," duplicated.",t,i)}),(function(n){e.finishToast(n,r,"Failed to duplicate "," duplicated.",t,void 0)}))}},{key:"postWithToast",value:function(t,n,i,r,o,l){var u=s.c.warning(i+n+"...",{autoClose:!1});a.a.fetchSecurePOST(t,{name:n},(function(t){e.finishToast(t,u,r,o,n,l(t))}),(function(t){e.finishToast(t,u,r,o,n,void 0)}))}},{key:"postWithToastPayload",value:function(t,n,i,r,o,l,u){var c=s.c.warning(r+n+"...",{autoClose:!1});a.a.fetchSecurePOST(t,i,(function(t){e.finishToast(t,c,o,l,n,u(t))}),(function(t){e.finishToast(t,c,o,l,n,void 0)}))}},{key:"saveFiles",value:function(t,n,i){var r=s.c.warning("Saving "+t+"...",{autoClose:!1});a.a.fetchSecurePOST("save_project_files",{name:t,files:JSON.stringify(n)},(function(n){e.finishToast(n,r,"Failed to save "," saved.",t,i)}),(function(n){e.finishToast(n,r,"Failed to save "," saved.",t,void 0)}))}},{key:"saveUnits",value:function(t,n,i){var r=s.c.warning("Saving "+t+"...",{autoClose:!1});a.a.fetchSecurePOST("save_project_units",{name:t,units:JSON.stringify(n)},(function(n){e.finishToast(n,r,"Failed to save "," saved.",t,i)}),(function(n){e.finishToast(n,r,"Failed to save "," saved.",t,void 0)}))}},{key:"finishToast",value:function(e,t,n,r,o){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:void 0;if(void 0!==e)if(void 0!==e.success)if(e.success)s.c.update(t,{render:o+r,type:s.c.TYPE.SUCCESS,autoClose:500}),void 0!==a&&a();else if(void 0!==e.reason)if("field"===e.reason){var l,u="",c=Object(i.a)(e.field);try{for(c.s();!(l=c.n()).done;){var d=l.value;u.length>0&&(u+=" "),u+=d.reason}}catch(f){c.e(f)}finally{c.f()}s.c.update(t,{render:n+o+": "+u,type:s.c.TYPE.ERROR,autoClose:1e4})}else s.c.update(t,{render:n+o+": "+e.reason,type:s.c.TYPE.ERROR,autoClose:1e4});else s.c.update(t,{render:n+o+".",type:s.c.TYPE.ERROR,autoClose:1e4});else void 0!==e.reason?s.c.update(t,{render:n+o+": "+e.reason,type:s.c.TYPE.ERROR,autoClose:1e4}):(s.c.update(t,{render:n+o+": "+e,type:s.c.TYPE.ERROR,autoClose:1e4}),console.log(e));else s.c.update(t,{render:n+o+".",type:s.c.TYPE.ERROR,autoClose:1e4}),console.log("results is undefined!")}},{key:"timeSince",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null===e||void 0===e||""===e)return"not yet";var n=Math.floor((Date.now()-Date.parse(e))/1e3);t&&(n=Math.floor((Date.parse(e)-Date.now())/1e3));var i=Math.floor(n/31536e3);return i>=1?i+(1===i?" year":" years"):(i=Math.floor(n/2592e3))>=1?i+(1===i?" month":" months"):(i=Math.floor(n/86400))>=1?i+(1===i?" day":" days"):(i=Math.floor(n/3600))>=1?i+(1===i?" hour":" hours"):(i=Math.floor(n/60))>=1?i+(1===i?" minute":" minutes"):Math.floor(n)+(1===i?" second":" seconds")}},{key:"timeUntilAccurate",value:function(e){if(null===e||void 0===e||""===e)return"not yet";var t=Math.floor((Date.parse(e)-Date.now())/1e3),n="",i=Math.floor(t/86400);if(i>=1){n.length>0&&(n+=" ");n+=i+(1===i?" day":" days")}if((i=Math.floor(t/3600))>=1){n.length>0&&(n+=" ");var r=i%24;n+=r+(1===r?" hour":" hours")}if((i=Math.floor(t/60))>=1){n.length>0&&(n+=" ");var o=i%60;n+=o+(1===o?" minute":" minutes")}n.length>0&&(n+=" ");var a=Math.floor(t)%60;return n+a+(1===a?" second":" seconds")}}]),e}();t.a=l}}]);